{"version":3,"sources":["zombie/assets/material.cljs"],"mappings":";;AAIA,GAAA,QAAAA,mCAAAC,0CAAAC,mDAAAC;AAAA;AAAA,AAAA,AAASC,iDAAwB,KAAAC,qDAAA,IAAA,IAAA;;AACjC,GAAA,QAAAL,mCAAAC,0CAAAC,mDAAAI;AAAA;AAAA,AAAA,AAASC,sCAAa,KAAAF,qDAAA,IAAA,IAAA;;AAEtB,+CAAA,/CAAMG,sGAAuBC;AAA7B,AACE,IAAMC,MAAI,KAAAC,+DAA0B,AAACC,qBAAQH;AAA7C,AACE,CAAM,AAAmBC,sBACnB,WAASG;AAAT,AACE,CAAM,AAAS,AAAkB,AAAYA,uCACvCT;;AACN,QAAM,AAAS,AAAQ,AAAYS,6BAC7BN;;;AACdG;;AAGJ,sCAAA,tCAAMI,oFAAcC,KAAKC,MAAMP;AAA/B,AACE,OAACQ,gBAAmB,AAACT,6CAAsBC;;AAE7C,uCAAA,vCAAMS,sFAAeH,KAAKC,MAAMP;AAAhC,AACE,OAACQ,gBAAmB,KAAAE,4DAAuB,AAACP,qBAAQH","names":["js/zombie","js/zombie.assets","js/zombie.assets.material","js/zombie.assets.material.uniform-player-position","zombie.assets.material/uniform-player-position","js/module$node_modules$three$build$three_module.Vector3","js/zombie.assets.material.uniform-time","zombie.assets.material/uniform-time","zombie.assets.material/create-phong-material","cfg","mat","js/module$node_modules$three$build$three_module.MeshPhongMaterial","cljs.core/clj->js","shader","zombie.assets.material/phong-loader","_key","_path","js/Promise.resolve","zombie.assets.material/sprite-loader","js/module$node_modules$three$build$three_module.SpriteMaterial"],"sourcesContent":["(ns zombie.assets.material\r\n  (:require [\"three\" :as three]\r\n            [\"./ShaderPatch\" :refer [SingleUniformValue]]))\r\n\r\n(defonce uniform-player-position (three/Vector3. 0 0 0))\r\n(defonce uniform-time (three/Vector3. 0 0 0))\r\n\r\n(defn create-phong-material [cfg]\r\n  (let [mat (three/MeshPhongMaterial. (clj->js cfg))]\r\n    (set! (.-onBeforeCompile mat)\r\n          (fn [^js shader]\r\n            (set! (.-value (.-playerPosition (.-uniforms shader)))\r\n                  uniform-player-position)\r\n            (set! (.-value (.-time (.-uniforms shader)))\r\n                  uniform-time)))\r\n    mat))\r\n\r\n\r\n(defn phong-loader [_key _path cfg]\r\n  (js/Promise.resolve (create-phong-material cfg)))\r\n\r\n(defn sprite-loader [_key _path cfg]\r\n  (js/Promise.resolve (three/SpriteMaterial. (clj->js cfg))))\r\n  \r\n"]}