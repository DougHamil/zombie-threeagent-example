{"version":3,"sources":["zombie/util/common.cljs"],"mappings":";AAEA,AAAA;;;;;;;;;;;;;AAAA,AAAA,CAAA,AAAA,sEAAA,tEAASI,iFAEEI;;AAFX,AAAA,YAAA,RAEWA;AAFX,AAGI,sDAAA,AAAAC,/CAACC,+DAAQJ,YAAIC;;;AAHjB,CAAA,AAAA,4EAAA,5EAASH,uFAKGI,EAAEG;;AALd,AAAA,YAAA,RAKYH;AALZ,AAMI,OAACE,+CAAO,AAACE,mDAAMN,WAAIO,mBAASN,YAAKI,WACzBJ;;;AAPZ,CAAA,AAAA,0EAAA,1EAASH,qFASEU,MAAKC;;AAThB,AAAA,gBAAA,ZASWD;AATX,AAUI,OAASA,qDAAK,iBAAAE,WAAG,+CAAA,AAAAP,/CAACC,+DAAQJ,YAAIC;AAAhB,AAAA,0EAAAS,wBAAAA,1FAACD,kCAAAA,4CAAAA;;;;AAVnB,CAAA,AAAA,0EAAA,1EAASX,qFAWEU,MAAKC,EAAEE;;AAXlB,AAAA,gBAAA,ZAWWH;AAXX,AAYI,OAASA,qDAAK,iBAAAI,WAAG,+CAAA,AAAAT,/CAACC,+DAAQJ,YAAIC;IAAhBY,WAAsBF;AAAtB,AAAA,0EAAAC,SAAAC,wBAAAD,SAAAC,5GAACJ,kCAAAA,qDAAAA;;;;AAZnB,CAAA,AAAA,0EAAA,1EAASX,qFAaEU,MAAKC,EAAEE,EAAEG;;AAbpB,AAAA,gBAAA,ZAaWN;AAbX,AAcI,OAASA,qDAAK,iBAAAO,WAAG,+CAAA,AAAAZ,/CAACC,+DAAQJ,YAAIC;IAAhBe,WAAsBL;IAAtBM,WAAwBH;AAAxB,AAAA,0EAAAC,SAAAC,SAAAC,wBAAAF,SAAAC,SAAAC,9HAACR,kCAAAA,8DAAAA;;;;AAdnB,CAAA,AAAA,0EAAA,1EAASX,qFAeEU,MAAKC,EAAEE,EAAEG,EAAEI;;AAftB,AAAA,gBAAA,ZAeWV;AAfX,AAgBI,OAASA,qDAAK,AAACW,8CAAMV,EAAE,+CAAA,AAAAN,/CAACC,+DAAQJ,YAAIC,aAAMU,EAAEG,EAAEI;;;AAhBlD,CAAA,qCAAA,rCAASpB;AAAT,AAAA,AAAA;;;AAAA,CAAA,2CAAA,3CAASA;;AAAT,CAAA,8CAAA,9CAASA;;AAAT,CAAA,mDAAA,WAAAJ,mBAAAC,qBAAAC,tGAASE;AAAT,AAAA,OAAAD,iBAAAF,qBAAA;;;AAAA;;;iCAAA,jCAASI,0EAAQC,IAAIC;AAArB,AAAA,YAAAH,0BAAiBE,IAAIC;;;AAAZH,AAkBT,4BAAA,5BAAMsB,gEAAQpB,IAAIC;AAAlB,AACE,OAACF,+BAASC,IAAIC;;AAEhB,AAAeoB,kCAAa,6CAAA,7CAACC;AAC7B,8BAAA,9BAAMC,oEAAUC,IAAIC;AAApB,AACE,AAACnB,mDAAMe,gCAAaK,iBAAOF,IAAIG;;AAC/B,GAAM,CAAA,OAAM,4CAAA,AAAAxB,5CAACyB,4DAAKP,iCAAaG;AAA/B,AACE,uGAAA,vGAAClB,mDAAMe,gCAAaQ,gBAAML;;AAC1B,OAACM,yGAAQL;;AAFX;;;AAIF,2CAAA,3CAAKM;AACL,0CAAA,1CAAKC;AACL,yCAAA,zCAAKC","names":["this__4450__auto__","writer__4451__auto__","opt__4452__auto__","cljs.core/-write","zombie.util.common/Cursor","zombie.util.common/->Cursor","atm","path","_","cljs.core/deref","cljs.core.get_in","new-value","cljs.core.swap_BANG_","cljs.core/assoc-in","this","f","G__10621","x","G__10622","G__10623","y","G__10624","G__10625","G__10626","more","cljs.core.apply","zombie.util.common/cursor","zombie.util.common/log-counters","cljs.core.atom","zombie.util.common/loop-log","key","value","cljs.core/update","cljs.core/inc","cljs.core.get","cljs.core/assoc","cljs.core.println","zombie.util.common/physics-layer-default","zombie.util.common/physics-layer-player","zombie.util.common/physics-layer-props"],"sourcesContent":["(ns zombie.util.common)\r\n\r\n(deftype Cursor [atm path]\r\n  IDeref\r\n  (-deref [_]\r\n    (get-in @atm path))\r\n  IReset\r\n  (-reset! [_ new-value]\r\n    (get-in (swap! atm assoc-in path new-value)\r\n            path))\r\n  ISwap\r\n  (-swap! [this f]\r\n    (-reset! this (f (get-in @atm path))))\r\n  (-swap! [this f x]\r\n    (-reset! this (f (get-in @atm path) x)))\r\n  (-swap! [this f x y]\r\n    (-reset! this (f (get-in @atm path) x y)))\r\n  (-swap! [this f x y more]\r\n    (-reset! this (apply f (get-in @atm path) x y more))))\r\n\r\n(defn cursor [atm path]\r\n  (->Cursor atm path))\r\n  \r\n(def ^:private log-counters (atom {}))\r\n(defn loop-log [key value]\r\n  (swap! log-counters update key inc)\r\n  (when (< 10 (get @log-counters key))\r\n    (swap! log-counters assoc key 0)\r\n    (println value)))\r\n\r\n(def physics-layer-default 0x0001)\r\n(def physics-layer-player 0x0002)\r\n(def physics-layer-props 0x0003)\r\n"]}