shadow$provide.module$node_modules$three_nebula$build$esm$core$Particle=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _constants=require("module$node_modules$three_nebula$build$esm$core$constants"),_utils=require("module$node_modules$three_nebula$build$esm$utils$index"),_constants2=require("module$node_modules$three_nebula$build$esm$constants$index"),_math=require("module$node_modules$three_nebula$build$esm$math$index"),_types=
require("module$node_modules$three_nebula$build$esm$core$types");class Particle{constructor(properties){this.id=`particle-${(0,_utils.uid)()}`;this.type=_types.CORE_TYPE_PARTICLE;this.life=_constants.DEFAULT_LIFE;this.age=_constants.DEFAULT_AGE;this.energy=_constants.DEFAULT_ENERGY;this.dead=_constants.DEFAULT_DEAD;this.sleep=_constants.DEFAULT_SLEEP;this.body=_constants.DEFAULT_BODY;this.parent=_constants.DEFAULT_PARENT;this.mass=_constants.DEFAULT_MASS;this.radius=_constants.DEFAULT_RADIUS;this.alpha=
_constants.DEFAULT_ALPHA;this.scale=_constants.DEFAULT_SCALE;this.useColor=_constants.DEFAULT_USE_COLOR;this.useAlpha=_constants.DEFAULT_USE_ALPHA;this.easing=_constants.DEFAULT_EASING;this.position=new _math.Vector3D;this.velocity=new _math.Vector3D;this.acceleration=new _math.Vector3D;this.old={};this.old.position=this.position.clone();this.old.velocity=this.velocity.clone();this.old.acceleration=this.acceleration.clone();this.behaviours=[];this.transform={};this.color={r:0,g:0,b:0};this.rotation=
new _math.Vector3D;this.distanceToCamera=0;_utils.Util.setPrototypeByObj(this,properties)}getDirection(){return 180/_constants2.PI*Math.atan2(this.velocity.x,-this.velocity.y)}reset(){this.life=_constants.DEFAULT_LIFE;this.age=_constants.DEFAULT_AGE;this.energy=_constants.DEFAULT_ENERGY;this.dead=_constants.DEFAULT_DEAD;this.sleep=_constants.DEFAULT_SLEEP;this.body=_constants.DEFAULT_BODY;this.parent=_constants.DEFAULT_PARENT;this.mass=_constants.DEFAULT_MASS;this.radius=_constants.DEFAULT_RADIUS;
this.alpha=_constants.DEFAULT_ALPHA;this.scale=_constants.DEFAULT_SCALE;this.useColor=_constants.DEFAULT_USE_COLOR;this.useAlpha=_constants.DEFAULT_USE_ALPHA;this.easing=_constants.DEFAULT_EASING;this.position.set(0,0,0);this.velocity.set(0,0,0);this.acceleration.set(0,0,0);this.old.position.set(0,0,0);this.old.velocity.set(0,0,0);this.old.acceleration.set(0,0,0);this.color.r=0;this.color.g=0;this.color.b=0;this.rotation.clear();_utils.Util.destroyObject(this.transform);this.removeAllBehaviours();
return this}update(time,index){if(!this.sleep){this.age+=time;let i=this.behaviours.length;for(;i--;)this.behaviours[i].applyBehaviour(this,time,index)}this.age>=this.life?this.destroy():(time=this.easing(this.age/this.life),this.energy=Math.max(1-time,0))}addBehaviour(behaviour){this.behaviours.push(behaviour);behaviour.initialize(this)}addBehaviours(behaviours){let i=behaviours.length;for(;i--;)this.addBehaviour(behaviours[i])}removeBehaviour(behaviour){behaviour=this.behaviours.indexOf(behaviour);
-1<behaviour&&this.behaviours.splice(behaviour,1)}removeAllBehaviours(){_utils.Util.destroyArray(this.behaviours)}destroy(){this.removeAllBehaviours();this.energy=0;this.dead=!0;this.parent=null}}exports.default=Particle}
//# sourceMappingURL=module$node_modules$three_nebula$build$esm$core$Particle.js.map
