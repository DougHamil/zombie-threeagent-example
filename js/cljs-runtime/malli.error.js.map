{"version":3,"sources":["malli/error.cljc"],"mappings":"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","names":["malli.error/default-errors","p__12411","map__12412","cljs.core/--destructure-map","cljs.core.get","likely-misspelling-of","_","clojure.string.join","cljs.core.map","cljs.core/last","p__12405","map__12406","p__12389","map__12390","schema","cljs.core._EQ_","cljs.core/count","malli.core.children","cljs.core/first","cljs.core/butlast","p__12395","map__12396","value","map__12397","min","max","malli.core.properties","cljs.core/int?","and__4210__auto__","p__12400","map__12401","map__12402","p__12398","map__12399","p__12403","map__12404","p__12409","map__12410","p__12391","map__12392","p__12407","map__12408","p__12393","map__12394","malli.error/-maybe-localized","x","locale","cljs.core/map?","malli.error/-message","error","options","or__4212__auto__","malli.core.options","temp__5751__auto__","fn","fexpr__12413","malli.core.eval","malli.error/-ensure","k","cljs.core/sequential?","size'","cljs.core.into","cljs.core/vec","cljs.core.repeat","malli.error/-just-error?","cljs.core/vector?","malli.error/-get","cljs.core/set?","cljs.core/associative?","G__12414","G__12415","malli.error/-put","v","cljs.core.conj","cljs.core.update","e","G__12417","G__12418","G__12419","p__12420","vec__12422","seq__12423","cljs.core/seq","first__12424","cljs.core/next","malli.error/-assoc-in","acc","p","ps","acc'","cljs.core/empty","value'","G__12425","G__12426","G__12427","G__12428","p__12429","p__12430","map__12431","map__12432","malli.error/-path","default-locale","properties","malli.error/-length->threshold","len","pred__12435","p1__12434#","p2__12433#","expr__12436","malli.error/-next-row","previous","current","other-seq","cljs.core.reduce","p__12438","vec__12439","cljs.core.nth","row","diagonal","above","other","update-val","x__4298__auto__","y__4299__auto__","cljs.core/peek","cljs.core/vector","malli.error/-levenshtein","sequence1","sequence2","p1__12443#","p2__12442#","cljs.core/identity","cljs.core/cons","cljs.core.range","malli.error/-similar-key","ky","ky2","min-len","cljs.core.apply","cljs.core/min","p1__12445#","malli.core._comp","clojure.string/starts-with?","cljs.core.subs","cljs.core/str","dist","malli.error/-likely-misspelled","keys","known-keys","key","p1__12446#","cljs.core.filter","cljs.core.remove","cljs.core/not-empty","malli.error/-most-similar-to","p1__12447#","cljs.core.juxt","cljs.core.sort_by","cljs.core/second","var_args","G__12449","malli.error/error-path","js/Error","malli.error.error_path","G__12451","malli.error/error-message","p__12452","p__12453","map__12454","map__12455","malli.error.error_message","type","errors","malli.core.type_properties","G__12456","malli.core.type","G__12457","G__12459","malli.error/with-error-message","malli.error.with_error_message","cljs.core.assoc","G__12462","malli.error/with-error-messages","p__12463","map__12464","explanation","malli.error.with_error_messages","f","cljs.core.doall","p1__12460#","G__12465","G__12468","malli.error/with-spell-checking","p__12469","map__12470","malli.error.with_spell_checking","keep-likely-misspelled-of","!likely-misspelling-of","cljs.core.atom","handle-invalid-value","dispatch","cljs.core/Keyword","types","path","cljs.core/keys","cljs.core/set","$","cljs.core.mapv","p__12471","map__12472","get-keys","vec__12473","malli.core.entries","cljs.core.get_in","error-type","similar","p1__12466#","cljs.core.swap_BANG_","cljs.core/into","G__12476","cljs.core/not","p__12477","map__12478","fexpr__12479","cljs.core/deref","G__12481","malli.error/humanize","p__12482","p__12483","map__12484","map__12485","malli.error.humanize","cljs.core/coll?","G__12486","G__12488"],"sourcesContent":["(ns malli.error\n  (:require [malli.core :as m]\n            [clojure.string :as str]))\n\n(def default-errors\n  {::unknown {:error/message {:en \"unknown error\"}}\n   ::m/missing-key {:error/message {:en \"missing required key\"}}\n   ::m/invalid-type {:error/message {:en \"invalid type\"}}\n   ::m/extra-key {:error/message {:en \"disallowed key\"}}\n   :malli.core/invalid-dispatch-value {:error/message {:en \"invalid dispatch value\"}}\n   ::misspelled-key {:error/fn {:en (fn [{::keys [likely-misspelling-of]} _]\n                                      (str \"should be spelled \" (str/join \" or \" (map last likely-misspelling-of))))}}\n   ::misspelled-value {:error/fn {:en (fn [{::keys [likely-misspelling-of]} _]\n                                        (str \"did you mean \" (str/join \" or \" (map last likely-misspelling-of))))}}\n   'any? {:error/message {:en \"should be any\"}}\n   'some? {:error/message {:en \"should be some\"}}\n   'number? {:error/message {:en \"should be a number\"}}\n   'integer? {:error/message {:en \"should be an integer\"}}\n   'int? {:error/message {:en \"should be an int\"}}\n   'pos-int? {:error/message {:en \"should be a positive int\"}}\n   'neg-int? {:error/message {:en \"should be a negative int\"}}\n   'nat-int? {:error/message {:en \"should be a non-negative int\"}}\n   'pos? {:error/message {:en \"should be positive\"}}\n   'neg? {:error/message {:en \"should be negative\"}}\n   'float? {:error/message {:en \"should be a float\"}}\n   'double? {:error/message {:en \"should be a double\"}}\n   'boolean? {:error/message {:en \"should be a boolean\"}}\n   'string? {:error/message {:en \"should be a string\"}}\n   'ident? {:error/message {:en \"should be an ident\"}}\n   'simple-ident? {:error/message {:en \"should be a simple ident\"}}\n   'qualified-ident? {:error/message {:en \"should be a qualified ident\"}}\n   'keyword? {:error/message {:en \"should be a keyword\"}}\n   'simple-keyword? {:error/message {:en \"should be a simple keyword\"}}\n   'qualified-keyword? {:error/message {:en \"should be a qualified keyword\"}}\n   'symbol? {:error/message {:en \"should be a symbol\"}}\n   'simple-symbol? {:error/message {:en \"should be a simple symbol\"}}\n   'qualified-symbol? {:error/message {:en \"should be a qualified symbol\"}}\n   'uuid? {:error/message {:en \"should be a uuid\"}}\n   'uri? {:error/message {:en \"should be a uri\"}}\n   #?@(:clj ['decimal? {:error/message {:en \"should be a decimal\"}}])\n   'inst? {:error/message {:en \"should be an inst\"}}\n   'seqable? {:error/message {:en \"should be a seqable\"}}\n   'indexed? {:error/message {:en \"should be an indexed\"}}\n   'map? {:error/message {:en \"should be a map\"}}\n   'vector? {:error/message {:en \"should be a vector\"}}\n   'list? {:error/message {:en \"should be a list\"}}\n   'seq? {:error/message {:en \"should be a seq\"}}\n   'char? {:error/message {:en \"should be a char\"}}\n   'set? {:error/message {:en \"should be a set\"}}\n   'nil? {:error/message {:en \"should be nil\"}}\n   'false? {:error/message {:en \"should be false\"}}\n   'true? {:error/message {:en \"should be true\"}}\n   'zero? {:error/message {:en \"should be zero\"}}\n   #?@(:clj ['rational? {:error/message {:en \"should be a rational\"}}])\n   'coll? {:error/message {:en \"should be a coll\"}}\n   'empty? {:error/message {:en \"should be empty\"}}\n   'associative? {:error/message {:en \"should be an associative\"}}\n   'sequential? {:error/message {:en \"should be a sequential\"}}\n   #?@(:clj ['ratio? {:error/message {:en \"should be a ratio\"}}])\n   #?@(:clj ['bytes? {:error/message {:en \"should be bytes\"}}])\n   :re {:error/message {:en \"should match regex\"}}\n   :=> {:error/message {:en \"invalid function\"}}\n   :enum {:error/fn {:en (fn [{:keys [schema]} _]\n                           (str \"should be \"\n                                (if (= 1 (count (m/children schema)))\n                                  (first (m/children schema))\n                                  (str \"either \" (->> (m/children schema) butlast (str/join \", \"))\n                                       \" or \" (last (m/children schema))))))}}\n   :int {:error/fn {:en (fn [{:keys [schema value]} _]\n                          (let [{:keys [min max]} (m/properties schema)]\n                            (cond\n                              (not (int? value)) \"should be an integer\"\n                              (and min (= min max)) (str \"should be \" min)\n                              (and min max) (str \"should be between \" min \" and \" max)\n                              min (str \"should be at least \" min)\n                              max (str \"should be at most \" max))))}}\n   :string {:error/fn {:en (fn [{:keys [schema value]} _]\n                             (let [{:keys [min max]} (m/properties schema)]\n                               (cond\n                                 (not (string? value)) \"should be a string\"\n                                 (and min (= min max)) (str \"should be \" min \" characters\")\n                                 (and min max) (str \"should be between \" min \" and \" max \" characters\")\n                                 min (str \"should be at least \" min \" characters\")\n                                 max (str \"should be at most \" max \" characters\"))))}}\n   :> {:error/fn {:en (fn [{:keys [schema value]} _]\n                        (if (number? value)\n                          (str \"should be larger than \" (first (m/children schema)))\n                          \"should be a number\"))}}\n   :>= {:error/fn {:en (fn [{:keys [schema value]} _]\n                         (if (number? value)\n                           (str \"should be at least \" (first (m/children schema)))\n                           \"should be a number\"))}}\n   :< {:error/fn {:en (fn [{:keys [schema value]} _]\n                        (if (number? value)\n                          (str \"should be smaller than \" (first (m/children schema)))\n                          \"should be a number\"))}}\n   :<= {:error/fn {:en (fn [{:keys [schema value]} _]\n                         (if (number? value)\n                           (str \"should be at most \" (first (m/children schema)))\n                           \"should be a number\"))}}\n   := {:error/fn {:en (fn [{:keys [schema]} _]\n                        (str \"should be \" (first (m/children schema))))}}\n   :not= {:error/fn {:en (fn [{:keys [schema]} _]\n                           (str \"should not be \" (first (m/children schema))))}}})\n\n(defn- -maybe-localized [x locale]\n  (if (map? x) (get x locale) x))\n\n(defn- -message [error x locale options]\n  (let [options (or options (m/options (:schema error)))]\n    (if x (or (if-let [fn (-maybe-localized (:error/fn x) locale)] ((m/eval fn options) error options))\n              (-maybe-localized (:error/message x) locale)))))\n\n(defn- -ensure [x k]\n  (if (sequential? x)\n    (let [size' (count x)]\n      (if (> k size') (into (vec x) (repeat (- (inc k) size') nil)) x))\n    x))\n\n(defn- -just-error? [x]\n  (and (vector? x) (= 1 (count x)) (string? (first x))))\n\n(defn- -get [x k]\n  (if (or (set? x) (associative? x)) (get x k) (-get (vec x) k)))\n\n(defn- -put [x k v]\n  (cond\n    (set? x) (conj x v)\n    (associative? x) (update x k (fn [e] (if (-just-error? v) (into (vec e) v) v)))\n    :else (-put (vec x) k v))) ;; we coerce errors into vectors\n\n(defn- -assoc-in [acc value [p & ps] error]\n  (cond\n    p (let [acc' (-ensure (or acc (empty value)) p)\n            value' (if ps (-assoc-in (-get acc p) (-get value p) ps error) error)]\n        (-put acc' p value'))\n    (map? value) (recur acc value [:malli/error] error)\n    acc acc\n    :else error))\n\n(defn- -path [{:keys [schema]}\n              {:keys [locale default-locale]\n               :or {default-locale :en}}]\n  (let [properties (m/properties schema)]\n    (or (-maybe-localized (:error/path properties) locale)\n        (-maybe-localized (:error/path properties) default-locale))))\n\n;;\n;; spell checking (kudos to https://github.com/bhauman/spell-spec)\n;;\n\n(defn- -length->threshold [len]\n  (condp #(<= %2 %1) len, 4 0, 5 1, 6 2, 11 3, 20 4 (int (* 0.2 len))))\n\n(defn- -next-row [previous current other-seq]\n  (reduce\n    (fn [row [diagonal above other]]\n      (let [update-val (if (= other current) diagonal (inc (min diagonal above (peek row))))]\n        (conj row update-val)))\n    [(inc (first previous))]\n    (map vector previous (next previous) other-seq)))\n\n(defn- -levenshtein [sequence1 sequence2]\n  (peek (reduce (fn [previous current] (-next-row previous current sequence2))\n                (map #(identity %2) (cons nil sequence2) (range))\n                sequence1)))\n\n(defn- -similar-key [ky ky2]\n  (let [min-len (apply min (map (m/-comp count #(if (str/starts-with? % \":\") (subs % 1) %) str) [ky ky2]))\n        dist (-levenshtein (str ky) (str ky2))]\n    (when (<= dist (-length->threshold min-len)) dist)))\n\n(defn- -likely-misspelled [keys known-keys key]\n  (when-not (known-keys key)\n    (->> known-keys (filter #(-similar-key % key)) (remove keys) (not-empty))))\n\n(defn- -most-similar-to [keys key known-keys]\n  (->> (-likely-misspelled keys known-keys key)\n       (map (juxt #(-levenshtein (str %) (str key)) identity))\n       (filter first)\n       (sort-by first)\n       (map second)\n       (not-empty)))\n\n;;\n;; public api\n;;\n\n(defn error-path\n  ([error]\n   (error-path error nil))\n  ([error options]\n   (into (:in error) (-path error options))))\n\n(defn error-message\n  ([error]\n   (error-message error nil))\n  ([{:keys [schema type] :as error}\n    {:keys [errors locale default-locale]\n     :or {errors default-errors\n          default-locale :en} :as options}]\n   (or (-message error (m/properties schema) locale options)\n       (-message error (m/type-properties schema) locale options)\n       (-message error (errors (m/type schema)) locale options)\n       (-message error (errors type) locale options)\n       (-message error (m/properties schema) default-locale options)\n       (-message error (m/type-properties schema) default-locale options)\n       (-message error (errors (m/type schema)) default-locale options)\n       (-message error (errors type) default-locale options)\n       (-message error (errors ::unknown) locale options)\n       (-message error (errors ::unknown) default-locale options))))\n\n(defn with-error-message\n  ([error]\n   (with-error-message error nil))\n  ([error options]\n   (assoc error :message (error-message error options))))\n\n(defn with-error-messages\n  ([explanation]\n   (with-error-messages explanation nil))\n  ([explanation {f :wrap :or {f identity} :as options}]\n   (when explanation\n     (update explanation :errors (fn [errors] (doall (map #(f (with-error-message % options)) errors)))))))\n\n(defn with-spell-checking\n  ([explanation]\n   (with-spell-checking explanation nil))\n  ([explanation {:keys [keep-likely-misspelled-of]}]\n   (when explanation\n     (let [!likely-misspelling-of (atom #{})\n           handle-invalid-value (fn [schema _ value]\n                                  (let [dispatch (:dispatch (m/properties schema))]\n                                    (if (keyword? dispatch)\n                                      (let [value (dispatch value)]\n                                        [::misspelled-value value #{value}]))))\n           types {::m/extra-key (fn [_ path value] [::misspelled-key (last path) (-> value keys set (or #{}))])\n                  ::m/invalid-dispatch-value handle-invalid-value}]\n       (update\n         explanation\n         :errors\n         (fn [errors]\n           (as-> errors $\n                 (mapv (fn [{:keys [schema path type] :as error}]\n                         (if-let [get-keys (types type)]\n                           (let [known-keys (->> schema (m/entries) (map first) (set))\n                                 value (get-in (:value explanation) (butlast path))\n                                 [error-type key keys] (get-keys schema path value)\n                                 similar (-most-similar-to keys key known-keys)\n                                 likely-misspelling-of (mapv #(conj (vec (butlast path)) %) (vec similar))]\n                             (swap! !likely-misspelling-of into likely-misspelling-of)\n                             (cond-> error similar (assoc :type error-type\n                                                          ::likely-misspelling-of likely-misspelling-of)))\n                           error)) $)\n                 (if-not keep-likely-misspelled-of\n                   (remove (fn [{:keys [path type]}]\n                             (and (@!likely-misspelling-of path)\n                                  (= type ::m/missing-key))) $)\n                   $))))))))\n\n(defn humanize\n  ([explanation]\n   (humanize explanation nil))\n  ([{:keys [value errors]} {f :wrap :or {f :message} :as options}]\n   (if errors\n     (if (coll? value)\n       (reduce\n         (fn [acc error]\n           (-assoc-in acc value (error-path error options) [(f (with-error-message error options))]))\n         nil errors)\n       [(f (with-error-message (first errors) options))]))))\n"]}