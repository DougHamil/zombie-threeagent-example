shadow$provide.module$node_modules$troika_three_text$dist$troika_three_text_esm=function(global,require,module,exports){function getTextRenderInfo(args,callback){hasRequested=!0;args=assign({},args);args.font=toAbsoluteURL(args.font||CONFIG.defaultFontURL);args.text=""+args.text;args.sdfGlyphSize=args.sdfGlyphSize||CONFIG.sdfGlyphSize;if(null!=args.colorRanges){var colors={};for(let key in args.colorRanges)if(args.colorRanges.hasOwnProperty(key)){let val=args.colorRanges[key];"number"!==typeof val&&
(val=tempColor.set(val).getHex());colors[key]=val}args.colorRanges=colors}Object.freeze(args);const {textureWidth,sdfExponent}=CONFIG,{sdfGlyphSize}=args;colors=`${args.font}@${sdfGlyphSize}`;let atlas=atlases[colors];atlas||(atlas=atlases[colors]={sdfTexture:new _three.DataTexture(new Uint8Array(sdfGlyphSize*textureWidth*4),textureWidth,sdfGlyphSize,_three.RGBAFormat,void 0,void 0,void 0,void 0,_three.LinearFilter,_three.LinearFilter)},atlas.sdfTexture.font=args.font);processInWorker(args).then(result=>
{result.newGlyphSDFs&&(result.newGlyphSDFs.forEach(({textureData,atlasIndex})=>{const texImg=atlas.sdfTexture.image;for(;texImg.data.length<(atlasIndex+1)*sdfGlyphSize*sdfGlyphSize;){var biggerArray=new Uint8Array(2*texImg.data.length);biggerArray.set(texImg.data);texImg.data=biggerArray;texImg.height*=2}biggerArray=Math.floor(atlasIndex/4);var cols=texImg.width/sdfGlyphSize;atlasIndex=Math.floor(biggerArray/cols)*texImg.width*sdfGlyphSize*4+biggerArray%cols*sdfGlyphSize*4+atlasIndex%4;for(biggerArray=
0;biggerArray<sdfGlyphSize;biggerArray++){cols=biggerArray*sdfGlyphSize;const rowStartIndex=atlasIndex+biggerArray*texImg.width*4;for(let x=0;x<sdfGlyphSize;x++)texImg.data[rowStartIndex+4*x]=textureData[cols+x]}}),atlas.sdfTexture.needsUpdate=!0);callback(Object.freeze({parameters:args,sdfTexture:atlas.sdfTexture,sdfGlyphSize,sdfExponent,glyphBounds:result.glyphBounds,glyphAtlasIndices:result.glyphAtlasIndices,glyphColors:result.glyphColors,caretPositions:result.caretPositions,caretHeight:result.caretHeight,
chunkedBounds:result.chunkedBounds,ascender:result.ascender,descender:result.descender,lineHeight:result.lineHeight,topBaseline:result.topBaseline,blockBounds:result.blockBounds,visibleBounds:result.visibleBounds,timings:result.timings,get totalBounds(){console.log("totalBounds deprecated, use blockBounds instead");return result.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const [x0,y0,x1,y1]=result.blockBounds;return[x1-x0,y1-y0]}}))})}function assign(toObj,
fromObj){for(let key in fromObj)fromObj.hasOwnProperty(key)&&(toObj[key]=fromObj[key]);return toObj}function toAbsoluteURL(path){linkEl||(linkEl="undefined"===typeof document?{}:document.createElement("a"));linkEl.href=path;return linkEl.href}function createTextDerivedMaterial(baseMaterial){baseMaterial=(0,_troikaThreeUtils.createDerivedMaterial)(baseMaterial,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new _three.Vector2},uTroikaSDFGlyphSize:{value:0},
uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new _three.Vector4(0,0,0,0)},uTroikaClipRect:{value:new _three.Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new _three.Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new _three.Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new _three.Matrix3},uTroikaUseGlyphColors:{value:!0},
uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",
vertexTransform:"\nvec4 bounds \x3d aTroikaGlyphBounds;\nbounds.xz +\x3d uTroikaPositionOffset.x;\nbounds.yw -\x3d uTroikaPositionOffset.y;\n\nvec4 outlineBounds \x3d vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds \x3d vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY \x3d (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy \x3d mix(bounds.xy, bounds.zw, clippedXY);\n\nuv \x3d (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad \x3d uTroikaCurveRadius;\nif (rad !\x3d 0.0) {\n  float angle \x3d position.x / rad;\n  position.xz \x3d vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz \x3d vec2(sin(angle), cos(angle));\n}\n  \nposition \x3d uTroikaOrient * position;\nnormal \x3d uTroikaOrient * normal;\n\nvTroikaGlyphUV \x3d clippedXY.xy;\nvTroikaGlyphDimensions \x3d vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols \x3d uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare \x3d uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV \x3d txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds \x3d vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel \x3d mod(aTroikaGlyphIndex, 4.0);\n",
fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of encoding in SDFGenerator.js\n  \n  float maxDimension \x3d max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist \x3d (1.0 - pow(2.0 * (alpha \x3e 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist \x3d absDist * (alpha \x3e 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV \x3d mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba \x3d texture2D(uTroikaSDFTexture, textureUV);\n  float ch \x3d floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch \x3d\x3d 0.0 ? rgba.r : ch \x3d\x3d 1.0 ? rgba.g : ch \x3d\x3d 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ \x3e\x3d 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV \x3d clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance \x3d troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance +\x3d clampedGlyphUV \x3d\x3d vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha \x3d step(-distanceOffset, -distance);\n  #else\n\n  float alpha \x3d smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",
fragmentColorTransform:"\nfloat aaDist \x3d troikaGetAADist();\nfloat distance \x3d troikaGetFragDistValue();\nfloat edgeAlpha \x3d uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(distance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) \x26\x26 !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA \x3d gl_FragColor;\nfillRGBA.a *\x3d uTroikaFillOpacity;\nvec4 strokeRGBA \x3d uTroikaStrokeWidth \x3d\x3d 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a \x3d\x3d 0.0) fillRGBA.rgb \x3d strokeRGBA.rgb;\ngl_FragColor \x3d mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  distance\n));\ngl_FragColor.a *\x3d edgeAlpha;\n#endif\n\nif (edgeAlpha \x3d\x3d 0.0) {\n  discard;\n}\n",
customRewriter({vertexShader,fragmentShader}){let uDiffuseRE=/\buniform\s+vec3\s+diffuse\b/;uDiffuseRE.test(fragmentShader)&&(fragmentShader=fragmentShader.replace(uDiffuseRE,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),uDiffuseRE.test(vertexShader)||(vertexShader=vertexShader.replace(_troikaThreeUtils.voidMainRegExp,"uniform vec3 diffuse;\n$\x26\nvTroikaGlyphColor \x3d uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n")));return{vertexShader,fragmentShader}}});
baseMaterial.transparent=!0;Object.defineProperties(baseMaterial,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}});return baseMaterial}function groupCaretsByRow(textRenderInfo){let caretsByRow=_caretsByRowCache.get(textRenderInfo);if(!caretsByRow){const {caretPositions,caretHeight}=textRenderInfo;caretsByRow=new Map;for(let i=0;i<caretPositions.length;i+=3){const rowY=caretPositions[i+2];let rowCarets=caretsByRow.get(rowY);rowCarets||caretsByRow.set(rowY,rowCarets=[]);
rowCarets.push({x:caretPositions[i],y:rowY,height:caretHeight,charIndex:i/3});i+3>=caretPositions.length&&rowCarets.push({x:caretPositions[i+1],y:rowY,height:caretHeight,charIndex:i/3+1})}}_caretsByRowCache.set(textRenderInfo,caretsByRow);return caretsByRow}Object.defineProperty(exports,"__esModule",{value:!0});exports.configureTextBuilder=function(config){hasRequested?console.warn("configureTextBuilder called after first font request; will be ignored."):assign(CONFIG,config)};exports.createTextDerivedMaterial=
createTextDerivedMaterial;exports.dumpSDFTextures=function(){Object.keys(atlases).forEach(font=>{const atlas=atlases[font],canvas=document.createElement("canvas"),{width,height,data}=atlas.sdfTexture.image;canvas.width=width;canvas.height=height;const imgData=new ImageData(new Uint8ClampedArray(data),width,height);canvas.getContext("2d").putImageData(imgData,0,0);console.log(font,atlas,canvas.toDataURL());console.log("%c.",`
      background: url(${canvas.toDataURL()});
      background-size: ${width}px ${height}px;
      color: transparent;
      font-size: 0;
      line-height: ${height}px;
      padding-left: ${width}px;
    `)})};exports.getCaretAtPoint=function(textRenderInfo,x,y){let closestCaret=null;const {caretHeight}=textRenderInfo;textRenderInfo=groupCaretsByRow(textRenderInfo);let closestRowY=Infinity;textRenderInfo.forEach((carets,rowY)=>{Math.abs(y-(rowY+caretHeight/2))<Math.abs(y-(closestRowY+caretHeight/2))&&(closestRowY=rowY)});textRenderInfo.get(closestRowY).forEach(caret=>{if(!closestCaret||Math.abs(x-caret.x)<Math.abs(x-closestCaret.x))closestCaret=caret});return closestCaret};exports.getSelectionRects=
function(textRenderInfo,start,end){var rects;if(textRenderInfo){if((rects=_rectsCache.get(textRenderInfo))&&rects.start===start&&rects.end===end)return rects.rects;const {caretPositions,caretHeight}=textRenderInfo;end<start&&(rects=start,start=end,end=rects);start=Math.max(start,0);end=Math.min(end,caretPositions.length+1);rects=[];var currentRect=null;for(var i=start;i<end;i++){var x1=caretPositions[3*i],x2=caretPositions[3*i+1],left=Math.min(x1,x2);x1=Math.max(x1,x2);x2=caretPositions[3*i+2];if(!currentRect||
x2!==currentRect.bottom||left>currentRect.right||x1<currentRect.left)currentRect={left:Infinity,right:-Infinity,bottom:x2,top:x2+caretHeight},rects.push(currentRect);currentRect.left=Math.min(left,currentRect.left);currentRect.right=Math.max(x1,currentRect.right)}rects.sort((a,b)=>b.bottom-a.bottom||a.left-b.left);for(currentRect=rects.length-1;0<currentRect--;)i=rects[currentRect],left=rects[currentRect+1],i.bottom===left.bottom&&i.left<=left.right&&i.right>=left.left&&(left.left=Math.min(left.left,
i.left),left.right=Math.max(left.right,i.right),rects.splice(currentRect,1));_rectsCache.set(textRenderInfo,{start,end,rects})}return rects};exports.preloadFont=function({font,characters,sdfGlyphSize},callback){characters=Array.isArray(characters)?characters.join("\n"):""+characters;getTextRenderInfo({font,sdfGlyphSize,text:characters},callback)};exports.fontProcessorWorkerModule=exports.Text=exports.GlyphsGeometry=void 0;var _three=require("module$node_modules$three$build$three_module");global=require("module$node_modules$troika_worker_utils$dist$troika_worker_utils_esm");
module=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("module$node_modules$bidi_js$dist$bidi_mjs"));var _troikaThreeUtils=require("module$node_modules$troika_three_utils$dist$troika_three_utils_esm");require=(0,global.defineWorkerModule)({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(r$jscomp$0){var e$jscomp$0={parse:function(r){var t=e$jscomp$0._bin;r=new Uint8Array(r);if("ttcf"==t.readASCII(r,0,4)){var n=4;t.readUshort(r,
n);n+=2;t.readUshort(r,n);n+=2;var o=t.readUint(r,n);n+=4;for(var s=[],i=0;i<o;i++){var h=t.readUint(r,n);n+=4;s.push(e$jscomp$0._readFont(r,h))}return s}return[e$jscomp$0._readFont(r,0)]},_readFont:function(r,t){var a=e$jscomp$0._bin,n=t;a.readFixed(r,t);t+=4;var o=a.readUshort(r,t);t+=2;a.readUshort(r,t);t+=2;a.readUshort(r,t);t+=2;a.readUshort(r,t);t+=2;var s="cmap;head;hhea;maxp;hmtx;name;OS/2;post;loca;glyf;kern;CFF ;GPOS;GSUB;SVG ".split(";");n={_data:r,_offset:n};for(var h={},f=0;f<o;f++){var d=
a.readASCII(r,t,4);t+=4;a.readUint(r,t);t+=4;var u=a.readUint(r,t);t+=4;var l=a.readUint(r,t);t+=4;h[d]={offset:u,length:l}}for(f=0;f<s.length;f++)t=s[f],h[t]&&(n[t.trim()]=e$jscomp$0[t.trim()].parse(r,h[t].offset,h[t].length,n));return n},_tabOffset:function(r,t,a){var n=e$jscomp$0._bin,o=n.readUshort(r,a+4);a+=12;for(var i=0;i<o;i++){var h=n.readASCII(r,a,4);a+=4;n.readUint(r,a);a+=4;var f=n.readUint(r,a);if(a+=4,n.readUint(r,a),a+=4,h==t)return f}return 0}};e$jscomp$0._bin={readFixed:function(r,
e){return(r[e]<<8|r[e+1])+(r[e+2]<<8|r[e+3])/65540},readF2dot14:function(r,t){return e$jscomp$0._bin.readShort(r,t)/16384},readInt:function(r,t){var a=e$jscomp$0._bin.t.uint8;return a[0]=r[t+3],a[1]=r[t+2],a[2]=r[t+1],a[3]=r[t],e$jscomp$0._bin.t.int32[0]},readInt8:function(r,t){return e$jscomp$0._bin.t.uint8[0]=r[t],e$jscomp$0._bin.t.int8[0]},readShort:function(r,t){var a=e$jscomp$0._bin.t.uint8;return a[1]=r[t],a[0]=r[t+1],e$jscomp$0._bin.t.int16[0]},readUshort:function(r,e){return r[e]<<8|r[e+1]},
readUshorts:function(r,t,a){for(var n=[],o=0;o<a;o++)n.push(e$jscomp$0._bin.readUshort(r,t+2*o));return n},readUint:function(r,t){var a=e$jscomp$0._bin.t.uint8;return a[3]=r[t],a[2]=r[t+1],a[1]=r[t+2],a[0]=r[t+3],e$jscomp$0._bin.t.uint32[0]},readUint64:function(r,t){return 4294967296*e$jscomp$0._bin.readUint(r,t)+e$jscomp$0._bin.readUint(r,t+4)},readASCII:function(r,e,t){for(var a="",n=0;n<t;n++)a+=String.fromCharCode(r[e+n]);return a},readUnicode:function(r,e,t){for(var a="",n=0;n<t;n++){var o=r[e++]<<
8|r[e++];a+=String.fromCharCode(o)}return a},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,t,a){var n=e$jscomp$0._bin._tdec;return n&&0==t&&a==r.length?n.decode(r):e$jscomp$0._bin.readASCII(r,t,a)},readBytes:function(r,e,t){for(var a=[],n=0;n<t;n++)a.push(r[e+n]);return a},readASCIIArray:function(r,e,t){for(var a=[],n=0;n<t;n++)a.push(String.fromCharCode(r[e+n]));return a}};e$jscomp$0._bin.t={buff:new ArrayBuffer(8)};e$jscomp$0._bin.t.int8=new Int8Array(e$jscomp$0._bin.t.buff);
e$jscomp$0._bin.t.uint8=new Uint8Array(e$jscomp$0._bin.t.buff);e$jscomp$0._bin.t.int16=new Int16Array(e$jscomp$0._bin.t.buff);e$jscomp$0._bin.t.uint16=new Uint16Array(e$jscomp$0._bin.t.buff);e$jscomp$0._bin.t.int32=new Int32Array(e$jscomp$0._bin.t.buff);e$jscomp$0._bin.t.uint32=new Uint32Array(e$jscomp$0._bin.t.buff);e$jscomp$0._lctf={};e$jscomp$0._lctf.parse=function(r,t,a,n,o){var s=e$jscomp$0._bin;a={};n=t;s.readFixed(r,t);t+=4;var f=s.readUshort(r,t);t+=2;var d=s.readUshort(r,t);t=s.readUshort(r,
t+2);return a.scriptList=e$jscomp$0._lctf.readScriptList(r,n+f),a.featureList=e$jscomp$0._lctf.readFeatureList(r,n+d),a.lookupList=e$jscomp$0._lctf.readLookupList(r,n+t,o),a};e$jscomp$0._lctf.readLookupList=function(r,t,a){var n=e$jscomp$0._bin,o=t,s=[],i=n.readUshort(r,t);t+=2;for(var h=0;h<i;h++){var f=n.readUshort(r,t);t+=2;f=e$jscomp$0._lctf.readLookupTable(r,o+f,a);s.push(f)}return s};e$jscomp$0._lctf.readLookupTable=function(r,t,a){var n=e$jscomp$0._bin,o=t,s={tabs:[]};s.ltype=n.readUshort(r,
t);t+=2;s.flag=n.readUshort(r,t);t+=2;var i=n.readUshort(r,t);t+=2;for(var h=s.ltype,f=0;f<i;f++){var d=n.readUshort(r,t);t+=2;d=a(r,h,o+d,s);s.tabs.push(d)}return s};e$jscomp$0._lctf.numOfOnes=function(r){for(var e=0,t=0;32>t;t++)0!=(r>>>t&1)&&e++;return e};e$jscomp$0._lctf.readClassDef=function(r,t){var a=e$jscomp$0._bin,n=[],o=a.readUshort(r,t);if(t+=2,1==o){var s=a.readUshort(r,t);t+=2;var i=a.readUshort(r,t);t+=2;for(var h=0;h<i;h++)n.push(s+h),n.push(s+h),n.push(a.readUshort(r,t)),t+=2}if(2==
o)for(o=a.readUshort(r,t),t+=2,h=0;h<o;h++)n.push(a.readUshort(r,t)),t+=2,n.push(a.readUshort(r,t)),t+=2,n.push(a.readUshort(r,t)),t+=2;return n};e$jscomp$0._lctf.getInterval=function(r,e){for(var t=0;t<r.length;t+=3){var a=r[t],n=r[t+1];if(r[t+2],a<=e&&e<=n)return t}return-1};e$jscomp$0._lctf.readCoverage=function(r,t){var a=e$jscomp$0._bin,n={};n.fmt=a.readUshort(r,t);t+=2;var o=a.readUshort(r,t);return t+=2,1==n.fmt&&(n.tab=a.readUshorts(r,t,o)),2==n.fmt&&(n.tab=a.readUshorts(r,t,3*o)),n};e$jscomp$0._lctf.coverageIndex=
function(r,t){var a=r.tab;return 1==r.fmt?a.indexOf(t):2==r.fmt&&(r=e$jscomp$0._lctf.getInterval(a,t),-1!=r)?a[r+2]+(t-a[r]):-1};e$jscomp$0._lctf.readFeatureList=function(r,t){var a=e$jscomp$0._bin,n=t,o=[],s=a.readUshort(r,t);t+=2;for(var i=0;i<s;i++){var h=a.readASCII(r,t,4);t+=4;var f=a.readUshort(r,t);t+=2;f=e$jscomp$0._lctf.readFeatureTable(r,n+f);f.tag=h.trim();o.push(f)}return o};e$jscomp$0._lctf.readFeatureTable=function(r,t){var a=e$jscomp$0._bin,n=t,o={},s=a.readUshort(r,t);t+=2;0<s&&(o.featureParams=
n+s);n=a.readUshort(r,t);t+=2;o.tab=[];for(s=0;s<n;s++)o.tab.push(a.readUshort(r,t+2*s));return o};e$jscomp$0._lctf.readScriptList=function(r,t){var a=e$jscomp$0._bin,n=t,o={},s=a.readUshort(r,t);t+=2;for(var i=0;i<s;i++){var h=a.readASCII(r,t,4);t+=4;var f=a.readUshort(r,t);t+=2;o[h.trim()]=e$jscomp$0._lctf.readScriptTable(r,n+f)}return o};e$jscomp$0._lctf.readScriptTable=function(r,t){var a=e$jscomp$0._bin,n=t,o={},s=a.readUshort(r,t);t+=2;o.default=e$jscomp$0._lctf.readLangSysTable(r,n+s);s=a.readUshort(r,
t);t+=2;for(var h=0;h<s;h++){var f=a.readASCII(r,t,4);t+=4;var d=a.readUshort(r,t);t+=2;o[f.trim()]=e$jscomp$0._lctf.readLangSysTable(r,n+d)}return o};e$jscomp$0._lctf.readLangSysTable=function(r,t){var a=e$jscomp$0._bin,n={};a.readUshort(r,t);t+=2;n.reqFeature=a.readUshort(r,t);t+=2;var o=a.readUshort(r,t);return t+=2,n.features=a.readUshorts(r,t,o),n};e$jscomp$0.CFF={};e$jscomp$0.CFF.parse=function(r,t,a){var n=e$jscomp$0._bin;(r=new Uint8Array(r.buffer,t,a))[t=0];r[++t];r[++t];r[++t];t++;var o=
[];t=e$jscomp$0.CFF.readIndex(r,t,o);var s=[];for(a=0;a<o.length-1;a++)s.push(n.readASCII(r,t+o[a],o[a+1]-o[a]));t+=o[o.length-1];o=[];t=e$jscomp$0.CFF.readIndex(r,t,o);s=[];for(a=0;a<o.length-1;a++)s.push(e$jscomp$0.CFF.readDict(r,t+o[a],t+o[a+1]));t+=o[o.length-1];o=s[0];var u=[];t=e$jscomp$0.CFF.readIndex(r,t,u);s=[];for(a=0;a<u.length-1;a++)s.push(n.readASCII(r,t+u[a],u[a+1]-u[a]));if(t+=u[u.length-1],e$jscomp$0.CFF.readSubrs(r,t,o),o.CharStrings){t=o.CharStrings;u=[];t=e$jscomp$0.CFF.readIndex(r,
t,u);var v=[];for(a=0;a<u.length-1;a++)v.push(n.readBytes(r,t+u[a],u[a+1]-u[a]));o.CharStrings=v}if(o.ROS){t=o.FDArray;u=[];t=e$jscomp$0.CFF.readIndex(r,t,u);o.FDArray=[];for(a=0;a<u.length-1;a++)v=e$jscomp$0.CFF.readDict(r,t+u[a],t+u[a+1]),e$jscomp$0.CFF._readFDict(r,v,s),o.FDArray.push(v);t=o.FDSelect;o.FDSelect=[];a=r[t];if(t++,3!=a)throw a;u=n.readUshort(r,t);t+=2;for(a=0;a<u+1;a++)o.FDSelect.push(n.readUshort(r,t),r[t+2]),t+=3}return o.Encoding&&(o.Encoding=e$jscomp$0.CFF.readEncoding(r,o.Encoding,
o.CharStrings.length)),o.charset&&(o.charset=e$jscomp$0.CFF.readCharset(r,o.charset,o.CharStrings.length)),e$jscomp$0.CFF._readFDict(r,o,s),o};e$jscomp$0.CFF._readFDict=function(r,t,a){var n,o;for(o in t.Private&&(n=t.Private[1],t.Private=e$jscomp$0.CFF.readDict(r,n,n+t.Private[0]),t.Private.Subrs&&e$jscomp$0.CFF.readSubrs(r,n+t.Private.Subrs,t.Private)),t)-1!="FamilyName FontName FullName Notice version Copyright".split(" ").indexOf(o)&&(t[o]=a[t[o]-426+35])};e$jscomp$0.CFF.readSubrs=function(r,
t,a){var n=e$jscomp$0._bin,o=[];t=e$jscomp$0.CFF.readIndex(r,t,o);var i=o.length;a.Bias=1240>i?107:33900>i?1131:32768;a.Subrs=[];for(i=0;i<o.length-1;i++)a.Subrs.push(n.readBytes(r,t+o[i],o[i+1]-o[i]))};e$jscomp$0.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,
74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0];e$jscomp$0.CFF.glyphByUnicode=function(r,e){for(var t=0;t<r.charset.length;t++)if(r.charset[t]==
e)return t;return-1};e$jscomp$0.CFF.glyphBySE=function(r,t){return 0>t||255<t?-1:e$jscomp$0.CFF.glyphByUnicode(r,e$jscomp$0.CFF.tableSE[t])};e$jscomp$0.CFF.readEncoding=function(r,t,a){e$jscomp$0._bin;a=[".notdef"];var o=r[t];if(t++,0!=o)throw"error: unknown encoding format: "+o;o=r[t];t++;for(var i=0;i<o;i++)a.push(r[t+i]);return a};e$jscomp$0.CFF.readCharset=function(r,t,a){var n=e$jscomp$0._bin,o=[".notdef"],s=r[t];if(t++,0==s)for(var i=0;i<a;i++){var h=n.readUshort(r,t);t+=2;o.push(h)}else{if(1!=
s&&2!=s)throw"error: format: "+s;for(;o.length<a;){h=n.readUshort(r,t);t+=2;var f=0;1==s?(f=r[t],t++):(f=n.readUshort(r,t),t+=2);for(i=0;i<=f;i++)o.push(h),h++}}return o};e$jscomp$0.CFF.readIndex=function(r,t,a){var n=e$jscomp$0._bin,o=n.readUshort(r,t)+1,s=r[t+=2];if(t++,1==s)for(var i=0;i<o;i++)a.push(r[t+i]);else if(2==s)for(i=0;i<o;i++)a.push(n.readUshort(r,t+2*i));else if(3==s)for(i=0;i<o;i++)a.push(16777215&n.readUint(r,t+3*i-1));else if(1!=o)throw"unsupported offset size: "+s+", count: "+o;
return t+o*s-1};e$jscomp$0.CFF.getCharString=function(r,t,a){var n=e$jscomp$0._bin,o=r[t],s=r[t+1];r[t+2];r[t+3];r[t+4];var i=1,h=null,f=null;20>=o&&(h=o,i=1);12==o&&(h=100*o+s,i=2);21<=o&&27>=o&&(h=o,i=1);28==o&&(f=n.readShort(r,t+1),i=3);29<=o&&31>=o&&(h=o,i=1);32<=o&&246>=o&&(f=o-139,i=1);247<=o&&250>=o&&(f=256*(o-247)+s+108,i=2);251<=o&&254>=o&&(f=256*-(o-251)-s-108,i=2);255==o&&(f=n.readInt(r,t+1)/65535,i=5);a.val=null!=f?f:"o"+h;a.size=i};e$jscomp$0.CFF.readCharString=function(r,t,a){a=t+a;
for(var o=e$jscomp$0._bin,s=[];t<a;){var i=r[t],h=r[t+1];r[t+2];r[t+3];r[t+4];var f=1,d=null,u=null;20>=i&&(d=i,f=1);12==i&&(d=100*i+h,f=2);19!=i&&20!=i||(d=i,f=2);21<=i&&27>=i&&(d=i,f=1);28==i&&(u=o.readShort(r,t+1),f=3);29<=i&&31>=i&&(d=i,f=1);32<=i&&246>=i&&(u=i-139,f=1);247<=i&&250>=i&&(u=256*(i-247)+h+108,f=2);251<=i&&254>=i&&(u=256*-(i-251)-h-108,f=2);255==i&&(u=o.readInt(r,t+1)/65535,f=5);s.push(null!=u?u:"o"+d);t+=f}return s};e$jscomp$0.CFF.readDict=function(r,t,a){for(var n=e$jscomp$0._bin,
o={},s=[];t<a;){var i=r[t],h=r[t+1];r[t+2];r[t+3];r[t+4];var f=1,d=null,u=null;if(28==i&&(u=n.readShort(r,t+1),f=3),29==i&&(u=n.readInt(r,t+1),f=5),32<=i&&246>=i&&(u=i-139,f=1),247<=i&&250>=i&&(u=256*(i-247)+h+108,f=2),251<=i&&254>=i&&(u=256*-(i-251)-h-108,f=2),255==i)throw n.readInt(r,t+1),"unknown number";if(30==i){u=[];for(f=1;;){var v=r[t+f];f++;var c=v>>4;v&=15;if(15!=c&&u.push(c),15!=v&&u.push(v),15==v)break}c="";v=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"];for(var S=0;S<
u.length;S++)c+=v[u[S]];u=parseFloat(c)}21>=i&&(d="version Notice FullName FamilyName Weight FontBBox BlueValues OtherBlues FamilyBlues FamilyOtherBlues StdHW StdVW escape UniqueID XUID charset Encoding CharStrings Private Subrs defaultWidthX nominalWidthX".split(" ")[i],f=1,12==i)&&(d=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,
"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][h],f=2);null!=d?(o[d]=1==s.length?s[0]:s,s=[]):s.push(u);t+=f}return o};e$jscomp$0.cmap={};e$jscomp$0.cmap.parse=function(r,t,a){r=new Uint8Array(r.buffer,t,a);t=0;a=e$jscomp$0._bin;var o={};a.readUshort(r,t);t+=2;var s=a.readUshort(r,t);t+=2;var i=[];o.tables=[];for(var h=
0;h<s;h++){var f=a.readUshort(r,t);t+=2;var d=a.readUshort(r,t);t+=2;var u=a.readUint(r,t);t+=4;var l="p"+f+"e"+d,v=i.indexOf(u);if(-1==v){var c;v=o.tables.length;i.push(u);var p=a.readUshort(r,u);0==p?c=e$jscomp$0.cmap.parse0(r,u):4==p?c=e$jscomp$0.cmap.parse4(r,u):6==p?c=e$jscomp$0.cmap.parse6(r,u):12==p?c=e$jscomp$0.cmap.parse12(r,u):console.debug("unknown format: "+p,f,d,u);o.tables.push(c)}if(null!=o[l])throw"multiple tables for one platform+encoding";o[l]=v}return o};e$jscomp$0.cmap.parse0=
function(r,t){var a=e$jscomp$0._bin,n={};n.format=a.readUshort(r,t);t+=2;var o=a.readUshort(r,t);t+=2;a.readUshort(r,t);t+=2;n.map=[];for(a=0;a<o-6;a++)n.map.push(r[t+a]);return n};e$jscomp$0.cmap.parse4=function(r,t){var a=e$jscomp$0._bin,n=t,o={};o.format=a.readUshort(r,t);t+=2;var s=a.readUshort(r,t);t+=2;a.readUshort(r,t);t+=2;var i=a.readUshort(r,t);t+=2;i/=2;o.searchRange=a.readUshort(r,t);t+=2;o.entrySelector=a.readUshort(r,t);t+=2;o.rangeShift=a.readUshort(r,t);t+=2;o.endCount=a.readUshorts(r,
t,i);t=t+2*i+2;o.startCount=a.readUshorts(r,t,i);t+=2*i;o.idDelta=[];for(var f=0;f<i;f++)o.idDelta.push(a.readShort(r,t)),t+=2;o.idRangeOffset=a.readUshorts(r,t,i);t+=2*i;for(o.glyphIdArray=[];t<n+s;)o.glyphIdArray.push(a.readUshort(r,t)),t+=2;return o};e$jscomp$0.cmap.parse6=function(r,t){var a=e$jscomp$0._bin,n={};n.format=a.readUshort(r,t);t+=2;a.readUshort(r,t);t+=2;a.readUshort(r,t);t+=2;n.firstCode=a.readUshort(r,t);t+=2;var o=a.readUshort(r,t);t+=2;n.glyphIdArray=[];for(var s=0;s<o;s++)n.glyphIdArray.push(a.readUshort(r,
t)),t+=2;return n};e$jscomp$0.cmap.parse12=function(r,t){var a=e$jscomp$0._bin,n={};n.format=a.readUshort(r,t);t=t+2+2;a.readUint(r,t);t+=4;a.readUint(r,t);t+=4;var o=a.readUint(r,t);t+=4;n.groups=[];for(var s=0;s<o;s++){var i=t+12*s,h=a.readUint(r,i+0),f=a.readUint(r,i+4);i=a.readUint(r,i+8);n.groups.push([h,f,i])}return n};e$jscomp$0.glyf={};e$jscomp$0.glyf.parse=function(r,e,t,a){r=[];for(e=0;e<a.maxp.numGlyphs;e++)r.push(null);return r};e$jscomp$0.glyf._parseGlyf=function(r,t){var a=e$jscomp$0._bin,
n=r._data,o=e$jscomp$0._tabOffset(n,"glyf",r._offset)+r.loca[t];if(r.loca[t]==r.loca[t+1])return null;r={};if(r.noc=a.readShort(n,o),o+=2,r.xMin=a.readShort(n,o),o+=2,r.yMin=a.readShort(n,o),o+=2,r.xMax=a.readShort(n,o),o+=2,r.yMax=a.readShort(n,o),o+=2,r.xMin>=r.xMax||r.yMin>=r.yMax)return null;if(0<r.noc){r.endPts=[];for(t=0;t<r.noc;t++)r.endPts.push(a.readUshort(n,o)),o+=2;t=a.readUshort(n,o);if(o+=2,n.length-o<t)return null;r.instructions=a.readBytes(n,o,t);o+=t;var f=r.endPts[r.noc-1]+1;r.flags=
[];for(t=0;t<f;t++){var d=n[o];if(o++,r.flags.push(d),0!=(8&d)){var u=n[o];o++;for(var l=0;l<u;l++)r.flags.push(d),t++}}r.xs=[];for(t=0;t<f;t++)d=0!=(2&r.flags[t]),u=0!=(16&r.flags[t]),d?(r.xs.push(u?n[o]:-n[o]),o++):u?r.xs.push(0):(r.xs.push(a.readShort(n,o)),o+=2);r.ys=[];for(t=0;t<f;t++)d=0!=(4&r.flags[t]),u=0!=(32&r.flags[t]),d?(r.ys.push(u?n[o]:-n[o]),o++):u?r.ys.push(0):(r.ys.push(a.readShort(n,o)),o+=2);for(t=o=n=0;t<f;t++)n+=r.xs[t],o+=r.ys[t],r.xs[t]=n,r.ys[t]=o}else{r.parts=[];do t=a.readUshort(n,
o),o+=2,f={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1},(r.parts.push(f),f.glyphIndex=a.readUshort(n,o),o+=2,1&t)?(d=a.readShort(n,o),o+=2,u=a.readShort(n,o),o+=2):(d=a.readInt8(n,o),o++,u=a.readInt8(n,o),o++),2&t?(f.m.tx=d,f.m.ty=u):(f.p1=d,f.p2=u),8&t?(f.m.a=f.m.d=a.readF2dot14(n,o),o+=2):64&t?(f.m.a=a.readF2dot14(n,o),o+=2,f.m.d=a.readF2dot14(n,o),o+=2):128&t&&(f.m.a=a.readF2dot14(n,o),o+=2,f.m.b=a.readF2dot14(n,o),o+=2,f.m.c=a.readF2dot14(n,o),o+=2,f.m.d=a.readF2dot14(n,o),o+=2);while(32&t);if(256&
t)for(a=a.readUshort(n,o),o+=2,r.instr=[],t=0;t<a;t++)r.instr.push(n[o]),o++}return r};e$jscomp$0.GPOS={};e$jscomp$0.GPOS.parse=function(r,t,a,n){return e$jscomp$0._lctf.parse(r,t,a,n,e$jscomp$0.GPOS.subt)};e$jscomp$0.GPOS.subt=function(r,t,a,n){var o=e$jscomp$0._bin,s=a,i={};if(i.fmt=o.readUshort(r,a),a+=2,1==t||2==t||3==t||7==t||8==t&&2>=i.fmt){var h=o.readUshort(r,a);a+=2;i.coverage=e$jscomp$0._lctf.readCoverage(r,h+s)}if(1==t&&1==i.fmt)n=o.readUshort(r,a),a+=2,e$jscomp$0._lctf.numOfOnes(n),0!=
n&&(i.pos=e$jscomp$0.GPOS.readValueRecord(r,a,n));else if(2==t&&1<=i.fmt&&2>=i.fmt){n=o.readUshort(r,a);a+=2;h=o.readUshort(r,a);a+=2;t=e$jscomp$0._lctf.numOfOnes(n);var l=e$jscomp$0._lctf.numOfOnes(h);if(1==i.fmt){i.pairsets=[];var v=o.readUshort(r,a);a+=2;for(var c=0;c<v;c++){var p=s+o.readUshort(r,a);a+=2;var U=o.readUshort(r,p);p+=2;for(var g=[],S=0;S<U;S++){var m=o.readUshort(r,p);p+=2;0!=n&&(x=e$jscomp$0.GPOS.readValueRecord(r,p,n),p+=2*t);0!=h&&(P=e$jscomp$0.GPOS.readValueRecord(r,p,h),p+=
2*l);g.push({gid2:m,val1:x,val2:P})}i.pairsets.push(g)}}if(2==i.fmt)for(x=o.readUshort(r,a),a+=2,P=o.readUshort(r,a),a+=2,v=o.readUshort(r,a),a+=2,o=o.readUshort(r,a),a+=2,i.classDef1=e$jscomp$0._lctf.readClassDef(r,s+x),i.classDef2=e$jscomp$0._lctf.readClassDef(r,s+P),i.matrix=[],c=0;c<v;c++){s=[];for(S=0;S<o;S++){var x=null,P=null;0!=n&&(x=e$jscomp$0.GPOS.readValueRecord(r,a,n),a+=2*t);0!=h&&(P=e$jscomp$0.GPOS.readValueRecord(r,a,h),a+=2*l);s.push({val1:x,val2:P})}i.matrix.push(s)}}else{if(9==t&&
1==i.fmt){i=o.readUshort(r,a);a=o.readUint(r,a+2);if(9==n.ltype)n.ltype=i;else if(n.ltype!=i)throw"invalid extension substitution";return e$jscomp$0.GPOS.subt(r,n.ltype,s+a)}console.debug("unsupported GPOS table LookupType",t,"format",i.fmt)}return i};e$jscomp$0.GPOS.readValueRecord=function(r,t,a){var n=e$jscomp$0._bin,o=[];return o.push(1&a?n.readShort(r,t):0),t+=1&a?2:0,o.push(2&a?n.readShort(r,t):0),t+=2&a?2:0,o.push(4&a?n.readShort(r,t):0),t+=4&a?2:0,o.push(8&a?n.readShort(r,t):0),o};e$jscomp$0.GSUB=
{};e$jscomp$0.GSUB.parse=function(r,t,a,n){return e$jscomp$0._lctf.parse(r,t,a,n,e$jscomp$0.GSUB.subt)};e$jscomp$0.GSUB.subt=function(r,t,a,n){var o=e$jscomp$0._bin,s=a,i={};if(i.fmt=o.readUshort(r,a),a+=2,1!=t&&4!=t&&5!=t&&6!=t)return null;if(1==t||4==t||5==t&&2>=i.fmt||6==t&&2>=i.fmt){var h=o.readUshort(r,a);a+=2;i.coverage=e$jscomp$0._lctf.readCoverage(r,s+h)}if(1==t&&1<=i.fmt&&2>=i.fmt)1==i.fmt?i.delta=o.readShort(r,a):2==i.fmt&&(t=o.readUshort(r,a),i.newg=o.readUshorts(r,a+2,t));else if(4==t)for(i.vals=
[],t=o.readUshort(r,a),a+=2,n=0;n<t;n++)h=o.readUshort(r,a),a+=2,i.vals.push(e$jscomp$0.GSUB.readLigatureSet(r,s+h));else if(5==t&&2==i.fmt){if(2==i.fmt)for(n=o.readUshort(r,a),a+=2,i.cDef=e$jscomp$0._lctf.readClassDef(r,s+n),i.scset=[],t=o.readUshort(r,a),a+=2,n=0;n<t;n++)h=o.readUshort(r,a),a+=2,i.scset.push(0==h?null:e$jscomp$0.GSUB.readSubClassSet(r,s+h))}else if(6==t&&3==i.fmt){if(3==i.fmt){for(n=0;3>n;n++){t=o.readUshort(r,a);a+=2;h=[];for(var U=0;U<t;U++)h.push(e$jscomp$0._lctf.readCoverage(r,
s+o.readUshort(r,a+2*U)));a+=2*t;0==n&&(i.backCvg=h);1==n&&(i.inptCvg=h);2==n&&(i.ahedCvg=h)}t=o.readUshort(r,a);i.lookupRec=e$jscomp$0.GSUB.readSubstLookupRecords(r,a+2,t)}}else{if(7==t&&1==i.fmt){i=o.readUshort(r,a);a=o.readUint(r,a+2);if(9==n.ltype)n.ltype=i;else if(n.ltype!=i)throw"invalid extension substitution";return e$jscomp$0.GSUB.subt(r,n.ltype,s+a)}console.debug("unsupported GSUB table LookupType",t,"format",i.fmt)}return i};e$jscomp$0.GSUB.readSubClassSet=function(r,t){var a=e$jscomp$0._bin.readUshort,
n=t,o=[],s=a(r,t);t+=2;for(var i=0;i<s;i++){var h=a(r,t);t+=2;o.push(e$jscomp$0.GSUB.readSubClassRule(r,n+h))}return o};e$jscomp$0.GSUB.readSubClassRule=function(r,t){var a=e$jscomp$0._bin.readUshort,n={},o=a(r,t),s=a(r,t+=2);t+=2;n.input=[];for(var i=0;i<o-1;i++)n.input.push(a(r,t)),t+=2;return n.substLookupRecords=e$jscomp$0.GSUB.readSubstLookupRecords(r,t,s),n};e$jscomp$0.GSUB.readSubstLookupRecords=function(r,t,a){for(var n=e$jscomp$0._bin.readUshort,o=[],s=0;s<a;s++)o.push(n(r,t),n(r,t+2)),t+=
4;return o};e$jscomp$0.GSUB.readChainSubClassSet=function(r,t){var a=e$jscomp$0._bin,n=t,o=[],s=a.readUshort(r,t);t+=2;for(var i=0;i<s;i++){var h=a.readUshort(r,t);t+=2;o.push(e$jscomp$0.GSUB.readChainSubClassRule(r,n+h))}return o};e$jscomp$0.GSUB.readChainSubClassRule=function(r,t){for(var a=e$jscomp$0._bin,n={},o=["backtrack","input","lookahead"],s=0;s<o.length;s++){var i=a.readUshort(r,t);t+=2;1==s&&i--;n[o[s]]=a.readUshorts(r,t,i);t+=2*n[o[s]].length}i=a.readUshort(r,t);return t+=2,n.subst=a.readUshorts(r,
t,2*i),n};e$jscomp$0.GSUB.readLigatureSet=function(r,t){var a=e$jscomp$0._bin,n=t,o=[],s=a.readUshort(r,t);t+=2;for(var i=0;i<s;i++){var h=a.readUshort(r,t);t+=2;o.push(e$jscomp$0.GSUB.readLigature(r,n+h))}return o};e$jscomp$0.GSUB.readLigature=function(r,t){var a=e$jscomp$0._bin,n={chain:[]};n.nglyph=a.readUshort(r,t);t+=2;var o=a.readUshort(r,t);t+=2;for(var s=0;s<o-1;s++)n.chain.push(a.readUshort(r,t)),t+=2;return n};e$jscomp$0.head={};e$jscomp$0.head.parse=function(r,t,a){a=e$jscomp$0._bin;var o=
{};return a.readFixed(r,t),t+=4,o.fontRevision=a.readFixed(r,t),t+=4,a.readUint(r,t),t+=4,a.readUint(r,t),t+=4,o.flags=a.readUshort(r,t),t+=2,o.unitsPerEm=a.readUshort(r,t),t+=2,o.created=a.readUint64(r,t),t+=8,o.modified=a.readUint64(r,t),t+=8,o.xMin=a.readShort(r,t),t+=2,o.yMin=a.readShort(r,t),t+=2,o.xMax=a.readShort(r,t),t+=2,o.yMax=a.readShort(r,t),t+=2,o.macStyle=a.readUshort(r,t),t+=2,o.lowestRecPPEM=a.readUshort(r,t),t+=2,o.fontDirectionHint=a.readShort(r,t),t+=2,o.indexToLocFormat=a.readShort(r,
t),t+=2,o.glyphDataFormat=a.readShort(r,t),o};e$jscomp$0.hhea={};e$jscomp$0.hhea.parse=function(r,t,a){a=e$jscomp$0._bin;var o={};return a.readFixed(r,t),t+=4,o.ascender=a.readShort(r,t),t+=2,o.descender=a.readShort(r,t),t+=2,o.lineGap=a.readShort(r,t),t+=2,o.advanceWidthMax=a.readUshort(r,t),t+=2,o.minLeftSideBearing=a.readShort(r,t),t+=2,o.minRightSideBearing=a.readShort(r,t),t+=2,o.xMaxExtent=a.readShort(r,t),t+=2,o.caretSlopeRise=a.readShort(r,t),t+=2,o.caretSlopeRun=a.readShort(r,t),t+=2,o.caretOffset=
a.readShort(r,t),t+=2,t+=8,o.metricDataFormat=a.readShort(r,t),t+=2,o.numberOfHMetrics=a.readUshort(r,t),o};e$jscomp$0.hmtx={};e$jscomp$0.hmtx.parse=function(r,t,a,n){a=e$jscomp$0._bin;for(var s={aWidth:[],lsBearing:[]},i=0,h=0,f=0;f<n.maxp.numGlyphs;f++)f<n.hhea.numberOfHMetrics&&(i=a.readUshort(r,t),t+=2,h=a.readShort(r,t),t+=2),s.aWidth.push(i),s.lsBearing.push(h);return s};e$jscomp$0.kern={};e$jscomp$0.kern.parse=function(r,t,a,n){var o=e$jscomp$0._bin,s=o.readUshort(r,t);if(t+=2,1==s)return e$jscomp$0.kern.parseV1(r,
t-2,a,n);a=o.readUshort(r,t);t+=2;n={glyph1:[],rval:[]};for(s=0;s<a;s++){t+=2;o.readUshort(r,t);t+=2;var d=o.readUshort(r,t);t+=2;d>>>=8;if(0!=(d&=15))throw"unknown kern table format: "+d;t=e$jscomp$0.kern.readFormat0(r,t,n)}return n};e$jscomp$0.kern.parseV1=function(r,t,a,n){a=e$jscomp$0._bin;a.readFixed(r,t);t+=4;n=a.readUint(r,t);t+=4;for(var i={glyph1:[],rval:[]},h=0;h<n;h++){a.readUint(r,t);t+=4;var f=a.readUshort(r,t);t+=2;a.readUshort(r,t);t+=2;f>>>=8;if(0!=(f&=15))throw"unknown kern table format: "+
f;t=e$jscomp$0.kern.readFormat0(r,t,i)}return i};e$jscomp$0.kern.readFormat0=function(r,t,a){var n=e$jscomp$0._bin,o=-1,s=n.readUshort(r,t);t+=2;n.readUshort(r,t);t+=2;n.readUshort(r,t);t+=2;n.readUshort(r,t);t+=2;for(var i=0;i<s;i++){var h=n.readUshort(r,t);t+=2;var f=n.readUshort(r,t);t+=2;var d=n.readShort(r,t);t+=2;h!=o&&(a.glyph1.push(h),a.rval.push({glyph2:[],vals:[]}));o=a.rval[a.rval.length-1];o.glyph2.push(f);o.vals.push(d);o=h}return t};e$jscomp$0.loca={};e$jscomp$0.loca.parse=function(r,
t,a,n){a=e$jscomp$0._bin;var s=[],i=n.head.indexToLocFormat;n=n.maxp.numGlyphs+1;if(0==i)for(var f=0;f<n;f++)s.push(a.readUshort(r,t+(f<<1))<<1);if(1==i)for(f=0;f<n;f++)s.push(a.readUint(r,t+(f<<2)));return s};e$jscomp$0.maxp={};e$jscomp$0.maxp.parse=function(r,t,a){a=e$jscomp$0._bin;var o={},s=a.readUint(r,t);return t+=4,o.numGlyphs=a.readUshort(r,t),t+=2,65536==s&&(o.maxPoints=a.readUshort(r,t),t+=2,o.maxContours=a.readUshort(r,t),t+=2,o.maxCompositePoints=a.readUshort(r,t),t+=2,o.maxCompositeContours=
a.readUshort(r,t),t+=2,o.maxZones=a.readUshort(r,t),t+=2,o.maxTwilightPoints=a.readUshort(r,t),t+=2,o.maxStorage=a.readUshort(r,t),t+=2,o.maxFunctionDefs=a.readUshort(r,t),t+=2,o.maxInstructionDefs=a.readUshort(r,t),t+=2,o.maxStackElements=a.readUshort(r,t),t+=2,o.maxSizeOfInstructions=a.readUshort(r,t),t+=2,o.maxComponentElements=a.readUshort(r,t),t+=2,o.maxComponentDepth=a.readUshort(r,t)),o};e$jscomp$0.name={};e$jscomp$0.name.parse=function(r,t,a){a=e$jscomp$0._bin;var o={};a.readUshort(r,t);t+=
2;var s=a.readUshort(r,t);t+=2;a.readUshort(r,t);for(var i,h="copyright fontFamily fontSubfamily ID fullName version postScriptName trademark manufacturer designer description urlVendor urlDesigner licence licenceURL --- typoFamilyName typoSubfamilyName compatibleFull sampleText postScriptCID wwsFamilyName wwsSubfamilyName lightPalette darkPalette".split(" "),f=t+=2,d=0;d<s;d++){var u=a.readUshort(r,t);t+=2;var l=a.readUshort(r,t);t+=2;var v=a.readUshort(r,t);t+=2;var c=a.readUshort(r,t);t+=2;var p=
a.readUshort(r,t);t+=2;var U=a.readUshort(r,t);t+=2;var S=h[c];U=f+12*s+U;if(0==u)p=a.readUnicode(r,U,p/2);else if(3==u&&0==l)p=a.readUnicode(r,U,p/2);else if(0==l)p=a.readASCII(r,U,p);else if(1==l)p=a.readUnicode(r,U,p/2);else if(3==l)p=a.readUnicode(r,U,p/2);else{if(1!=u)throw"unknown encoding "+l+", platformID: "+u;p=a.readASCII(r,U,p);console.debug("reading unknown MAC encoding "+l+" as ASCII")}u="p"+u+","+v.toString(16);null==o[u]&&(o[u]={});o[u][void 0!==S?S:c]=p;o[u]._lang=v}for(var y in o)if(null!=
o[y].postScriptName&&1033==o[y]._lang)return o[y];for(y in o)if(null!=o[y].postScriptName&&0==o[y]._lang)return o[y];for(y in o)if(null!=o[y].postScriptName&&3084==o[y]._lang)return o[y];for(y in o)if(null!=o[y].postScriptName)return o[y];for(y in o){i=y;break}return console.debug("returning name table with languageID "+o[i]._lang),o[i]};e$jscomp$0["OS/2"]={};e$jscomp$0["OS/2"].parse=function(r,t,a){a=e$jscomp$0._bin.readUshort(r,t);t+=2;var o={};if(0==a)e$jscomp$0["OS/2"].version0(r,t,o);else if(1==
a)e$jscomp$0["OS/2"].version1(r,t,o);else if(2==a||3==a||4==a)e$jscomp$0["OS/2"].version2(r,t,o);else{if(5!=a)throw"unknown OS/2 table version: "+a;e$jscomp$0["OS/2"].version5(r,t,o)}return o};e$jscomp$0["OS/2"].version0=function(r,t,a){var n=e$jscomp$0._bin;return a.xAvgCharWidth=n.readShort(r,t),t+=2,a.usWeightClass=n.readUshort(r,t),t+=2,a.usWidthClass=n.readUshort(r,t),t+=2,a.fsType=n.readUshort(r,t),t+=2,a.ySubscriptXSize=n.readShort(r,t),t+=2,a.ySubscriptYSize=n.readShort(r,t),t+=2,a.ySubscriptXOffset=
n.readShort(r,t),t+=2,a.ySubscriptYOffset=n.readShort(r,t),t+=2,a.ySuperscriptXSize=n.readShort(r,t),t+=2,a.ySuperscriptYSize=n.readShort(r,t),t+=2,a.ySuperscriptXOffset=n.readShort(r,t),t+=2,a.ySuperscriptYOffset=n.readShort(r,t),t+=2,a.yStrikeoutSize=n.readShort(r,t),t+=2,a.yStrikeoutPosition=n.readShort(r,t),t+=2,a.sFamilyClass=n.readShort(r,t),t+=2,a.panose=n.readBytes(r,t,10),t+=10,a.ulUnicodeRange1=n.readUint(r,t),t+=4,a.ulUnicodeRange2=n.readUint(r,t),t+=4,a.ulUnicodeRange3=n.readUint(r,t),
t+=4,a.ulUnicodeRange4=n.readUint(r,t),t+=4,a.achVendID=[n.readInt8(r,t),n.readInt8(r,t+1),n.readInt8(r,t+2),n.readInt8(r,t+3)],t+=4,a.fsSelection=n.readUshort(r,t),t+=2,a.usFirstCharIndex=n.readUshort(r,t),t+=2,a.usLastCharIndex=n.readUshort(r,t),t+=2,a.sTypoAscender=n.readShort(r,t),t+=2,a.sTypoDescender=n.readShort(r,t),t+=2,a.sTypoLineGap=n.readShort(r,t),t+=2,a.usWinAscent=n.readUshort(r,t),t+=2,a.usWinDescent=n.readUshort(r,t),t+2};e$jscomp$0["OS/2"].version1=function(r,t,a){var n=e$jscomp$0._bin;
return t=e$jscomp$0["OS/2"].version0(r,t,a),a.ulCodePageRange1=n.readUint(r,t),t+=4,a.ulCodePageRange2=n.readUint(r,t),t+4};e$jscomp$0["OS/2"].version2=function(r,t,a){var n=e$jscomp$0._bin;return t=e$jscomp$0["OS/2"].version1(r,t,a),a.sxHeight=n.readShort(r,t),t+=2,a.sCapHeight=n.readShort(r,t),t+=2,a.usDefault=n.readUshort(r,t),t+=2,a.usBreak=n.readUshort(r,t),t+=2,a.usMaxContext=n.readUshort(r,t),t+2};e$jscomp$0["OS/2"].version5=function(r,t,a){var n=e$jscomp$0._bin;return t=e$jscomp$0["OS/2"].version2(r,
t,a),a.usLowerOpticalPointSize=n.readUshort(r,t),t+=2,a.usUpperOpticalPointSize=n.readUshort(r,t),t+2};e$jscomp$0.post={};e$jscomp$0.post.parse=function(r,t,a){a=e$jscomp$0._bin;var o={};return o.version=a.readFixed(r,t),t+=4,o.italicAngle=a.readFixed(r,t),t+=4,o.underlinePosition=a.readShort(r,t),t+=2,o.underlineThickness=a.readShort(r,t),o};null==e$jscomp$0&&(e$jscomp$0={});null==e$jscomp$0.U&&(e$jscomp$0.U={});e$jscomp$0.U.codeToGlyph=function(r,e){r=r.cmap;var a=-1;if(null!=r.p0e4?a=r.p0e4:null!=
r.p3e1?a=r.p3e1:null!=r.p1e0?a=r.p1e0:null!=r.p0e3&&(a=r.p0e3),-1==a)throw"no familiar platform and encoding!";r=r.tables[a];if(0==r.format)return e>=r.map.length?0:r.map[e];if(4==r.format){var o=-1;for(a=0;a<r.endCount.length;a++)if(e<=r.endCount[a]){o=a;break}return-1==o||r.startCount[o]>e?0:65535&(0!=r.idRangeOffset[o]?r.glyphIdArray[e-r.startCount[o]+(r.idRangeOffset[o]>>1)-(r.idRangeOffset.length-o)]:e+r.idDelta[o])}if(12==r.format){if(e>r.groups[r.groups.length-1][1])return 0;for(a=0;a<r.groups.length;a++)if(o=
r.groups[a],o[0]<=e&&e<=o[1])return o[2]+(e-o[0]);return 0}throw"unknown cmap table format "+r.format;};e$jscomp$0.U.glyphToPath=function(r,t){var a={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[t]){var n=r.SVG.entries[t];return null==n?a:("string"==typeof n&&(n=e$jscomp$0.SVG.toPath(n),r.SVG.entries[t]=n),n)}if(r.CFF){n={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1};var s=r.CFF,i=r.CFF.Private;if(s.ROS){for(i=0;s.FDSelect[i+2]<=t;)i+=2;i=s.FDArray[s.FDSelect[i+
1]].Private}e$jscomp$0.U._drawCFF(r.CFF.CharStrings[t],n,s,i,a)}else r.glyf&&e$jscomp$0.U._drawGlyf(t,r,a);return a};e$jscomp$0.U._drawGlyf=function(r,t,a){var n=t.glyf[r];null==n&&(n=t.glyf[r]=e$jscomp$0.glyf._parseGlyf(t,r));null!=n&&(-1<n.noc?e$jscomp$0.U._simpleGlyph(n,a):e$jscomp$0.U._compoGlyph(n,t,a))};e$jscomp$0.U._simpleGlyph=function(r,t){for(var a=0;a<r.noc;a++){for(var n=0==a?0:r.endPts[a-1]+1,o=r.endPts[a],s=n;s<=o;s++){var i=s==n?o:s-1,h=s==o?n:s+1,f=1&r.flags[s],d=1&r.flags[i],u=1&
r.flags[h],l=r.xs[s],v=r.ys[s];if(s==n)if(f){if(!d){e$jscomp$0.U.P.moveTo(t,l,v);continue}e$jscomp$0.U.P.moveTo(t,r.xs[i],r.ys[i])}else d?e$jscomp$0.U.P.moveTo(t,r.xs[i],r.ys[i]):e$jscomp$0.U.P.moveTo(t,(r.xs[i]+l)/2,(r.ys[i]+v)/2);f?d&&e$jscomp$0.U.P.lineTo(t,l,v):u?e$jscomp$0.U.P.qcurveTo(t,l,v,r.xs[h],r.ys[h]):e$jscomp$0.U.P.qcurveTo(t,l,v,(l+r.xs[h])/2,(v+r.ys[h])/2)}e$jscomp$0.U.P.closePath(t)}};e$jscomp$0.U._compoGlyph=function(r,t,a){for(var n=0;n<r.parts.length;n++){var o={cmds:[],crds:[]},
s=r.parts[n];e$jscomp$0.U._drawGlyf(s.glyphIndex,t,o);s=s.m;for(var h=0;h<o.crds.length;h+=2){var f=o.crds[h],d=o.crds[h+1];a.crds.push(f*s.a+d*s.b+s.tx);a.crds.push(f*s.c+d*s.d+s.ty)}for(h=0;h<o.cmds.length;h++)a.cmds.push(o.cmds[h])}};e$jscomp$0.U._getGlyphClass=function(r,t){r=e$jscomp$0._lctf.getInterval(t,r);return-1==r?0:t[r+2]};e$jscomp$0.U.getPairAdjustment=function(r,t,a){var n=0;if(r.GPOS){var o=r.GPOS,s=o.lookupList;o=o.featureList;for(var h=[],f=0;f<o.length;f++){var d=o[f];if("kern"==
d.tag)for(var u=0;u<d.tab.length;u++)if(!h[d.tab[u]]){h[d.tab[u]]=!0;for(var l=s[d.tab[u]],v=0;v<l.tabs.length;v++)if(null!=l.tabs[v]){var c,p=l.tabs[v];if((!p.coverage||-1!=(c=e$jscomp$0._lctf.coverageIndex(p.coverage,t)))&&1!=l.ltype&&2==l.ltype){var U;if(1==p.fmt)for(p=p.pairsets[c],f=0;f<p.length;f++)p[f].gid2==a&&(U=p[f]);else if(2==p.fmt){U=e$jscomp$0.U._getGlyphClass(t,p.classDef1);var m=e$jscomp$0.U._getGlyphClass(a,p.classDef2);U=p.matrix[U][m]}U&&U.val1&&U.val1[2]&&(n+=U.val1[2]);U&&U.val2&&
U.val2[0]&&(n+=U.val2[0])}}}}}r.kern&&(t=r.kern.glyph1.indexOf(t),-1!=t&&(a=r.kern.rval[t].glyph2.indexOf(a),-1!=a&&(n+=r.kern.rval[t].vals[a])));return n};e$jscomp$0.U._applySubs=function(r,t,a,n){for(var o=r.length-t-1,s=0;s<a.tabs.length;s++)if(null!=a.tabs[s]){var i,h=a.tabs[s];if(!h.coverage||-1!=(i=e$jscomp$0._lctf.coverageIndex(h.coverage,r[t])))if(1==a.ltype)r[t],1==h.fmt?r[t]+=h.delta:r[t]=h.newg[i];else if(4==a.ltype)for(var f=h.vals[i],d=0;d<f.length;d++){var u=f[d];h=u.chain.length;if(!(h>
o)){for(var v=!0,c=0,p=0;p<h;p++){for(;-1==r[t+c+(1+p)];)c++;u.chain[p]!=r[t+c+(1+p)]&&(v=!1)}if(v){r[t]=u.nglyph;for(p=0;p<h+c;p++)r[t+p+1]=-1;break}}}else if(5==a.ltype&&2==h.fmt)for(f=e$jscomp$0._lctf.getInterval(h.cDef,r[t]),c=h.scset[h.cDef[f+2]],u=0;u<c.length;u++){d=c[u];var y=d.input;if(!(y.length>o)){v=!0;for(p=0;p<y.length;p++){var F=e$jscomp$0._lctf.getInterval(h.cDef,r[t+1+p]);if(-1==f&&h.cDef[F+2]!=y[p]){v=!1;break}}if(v)for(v=d.substLookupRecords,d=0;d<v.length;d+=2)v[d],v[d+1]}}else if(6==
a.ltype&&3==h.fmt&&e$jscomp$0.U._glsCovered(r,h.backCvg,t-h.backCvg.length)&&e$jscomp$0.U._glsCovered(r,h.inptCvg,t)&&e$jscomp$0.U._glsCovered(r,h.ahedCvg,t+h.inptCvg.length))for(v=h.lookupRec,u=0;u<v.length;u+=2)f=v[u],e$jscomp$0.U._applySubs(r,t+f,n[v[u+1]],n)}};e$jscomp$0.U._glsCovered=function(r,t,a){for(var n=0;n<t.length;n++)if(-1==e$jscomp$0._lctf.coverageIndex(t[n],r[a+n]))return!1;return!0};e$jscomp$0.U.glyphsToPath=function(r,t,a){for(var n={cmds:[],crds:[]},o=0,s=0;s<t.length;s++){var i=
t[s];if(-1!=i){for(var h=s<t.length-1&&-1!=t[s+1]?t[s+1]:0,f=e$jscomp$0.U.glyphToPath(r,i),d=0;d<f.crds.length;d+=2)n.crds.push(f.crds[d]+o),n.crds.push(f.crds[d+1]);a&&n.cmds.push(a);for(d=0;d<f.cmds.length;d++)n.cmds.push(f.cmds[d]);a&&n.cmds.push("X");o+=r.hmtx.aWidth[i];s<t.length-1&&(o+=e$jscomp$0.U.getPairAdjustment(r,i,h))}}return n};e$jscomp$0.U.P={};e$jscomp$0.U.P.moveTo=function(r,e,t){r.cmds.push("M");r.crds.push(e,t)};e$jscomp$0.U.P.lineTo=function(r,e,t){r.cmds.push("L");r.crds.push(e,
t)};e$jscomp$0.U.P.curveTo=function(r,e,t,a,n,o,s){r.cmds.push("C");r.crds.push(e,t,a,n,o,s)};e$jscomp$0.U.P.qcurveTo=function(r,e,t,a,n){r.cmds.push("Q");r.crds.push(e,t,a,n)};e$jscomp$0.U.P.closePath=function(r){r.cmds.push("Z")};e$jscomp$0.U._drawCFF=function(r,t,a,n,o){for(var s=t.stack,i=t.nStems,h=t.haveWidth,f=t.width,d=t.open,u=0,l=t.x,v=t.y,c=0,p=0,U=0,g=0,S=0,m=0,b=0,y=0,F=0,_=0,C={val:0,size:0};u<r.length;){e$jscomp$0.CFF.getCharString(r,u,C);var x=C.val;if(u+=C.size,"o1"==x||"o18"==x)0!=
s.length%2&&!h&&(f=s.shift()+n.nominalWidthX),i+=s.length>>1,s.length=0,h=!0;else if("o3"==x||"o23"==x)0!=s.length%2&&!h&&(f=s.shift()+n.nominalWidthX),i+=s.length>>1,s.length=0,h=!0;else if("o4"==x)1<s.length&&!h&&(f=s.shift()+n.nominalWidthX,h=!0),d&&e$jscomp$0.U.P.closePath(o),v+=s.pop(),e$jscomp$0.U.P.moveTo(o,l,v),d=!0;else if("o5"==x)for(;0<s.length;)l+=s.shift(),v+=s.shift(),e$jscomp$0.U.P.lineTo(o,l,v);else if("o6"==x||"o7"==x){var P=s.length,I="o6"==x;for(x=0;x<P;x++){var O=s.shift();I?l+=
O:v+=O;I=!I;e$jscomp$0.U.P.lineTo(o,l,v)}}else if("o8"==x||"o24"==x){P=s.length;for(I=0;I+6<=P;)c=l+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),l=U+s.shift(),v=g+s.shift(),e$jscomp$0.U.P.curveTo(o,c,p,U,g,l,v),I+=6;"o24"==x&&(l+=s.shift(),v+=s.shift(),e$jscomp$0.U.P.lineTo(o,l,v))}else{if("o11"==x)break;if("o1234"==x||"o1235"==x||"o1236"==x||"o1237"==x)"o1234"==x&&(p=v,U=(c=l+s.shift())+s.shift(),_=g=p+s.shift(),m=g,y=v,l=(b=(S=(F=U+s.shift())+s.shift())+s.shift())+s.shift(),e$jscomp$0.U.P.curveTo(o,
c,p,U,g,F,_),e$jscomp$0.U.P.curveTo(o,S,m,b,y,l,v)),"o1235"==x&&(c=l+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),F=U+s.shift(),_=g+s.shift(),S=F+s.shift(),m=_+s.shift(),b=S+s.shift(),y=m+s.shift(),l=b+s.shift(),v=y+s.shift(),s.shift(),e$jscomp$0.U.P.curveTo(o,c,p,U,g,F,_),e$jscomp$0.U.P.curveTo(o,S,m,b,y,l,v)),"o1236"==x&&(c=l+s.shift(),p=v+s.shift(),U=c+s.shift(),_=g=p+s.shift(),m=g,b=(S=(F=U+s.shift())+s.shift())+s.shift(),y=m+s.shift(),l=b+s.shift(),e$jscomp$0.U.P.curveTo(o,c,p,U,g,F,_),
e$jscomp$0.U.P.curveTo(o,S,m,b,y,l,v)),"o1237"==x&&(c=l+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),F=U+s.shift(),_=g+s.shift(),S=F+s.shift(),m=_+s.shift(),b=S+s.shift(),y=m+s.shift(),Math.abs(b-l)>Math.abs(y-v)?l=b+s.shift():v=y+s.shift(),e$jscomp$0.U.P.curveTo(o,c,p,U,g,F,_),e$jscomp$0.U.P.curveTo(o,S,m,b,y,l,v));else if("o14"==x){if(0<s.length&&!h&&(f=s.shift()+a.nominalWidthX,h=!0),4==s.length)P=s.shift(),I=s.shift(),O=s.shift(),x=s.shift(),O=e$jscomp$0.CFF.glyphBySE(a,O),x=e$jscomp$0.CFF.glyphBySE(a,
x),e$jscomp$0.U._drawCFF(a.CharStrings[O],t,a,n,o),t.x=P,t.y=I,e$jscomp$0.U._drawCFF(a.CharStrings[x],t,a,n,o);d&&(e$jscomp$0.U.P.closePath(o),d=!1)}else if("o19"==x||"o20"==x)0!=s.length%2&&!h&&(f=s.shift()+n.nominalWidthX),i+=s.length>>1,s.length=0,h=!0,u+=i+7>>3;else if("o21"==x)2<s.length&&!h&&(f=s.shift()+n.nominalWidthX,h=!0),v+=s.pop(),l+=s.pop(),d&&e$jscomp$0.U.P.closePath(o),e$jscomp$0.U.P.moveTo(o,l,v),d=!0;else if("o22"==x)1<s.length&&!h&&(f=s.shift()+n.nominalWidthX,h=!0),l+=s.pop(),d&&
e$jscomp$0.U.P.closePath(o),e$jscomp$0.U.P.moveTo(o,l,v),d=!0;else if("o25"==x){for(;6<s.length;)l+=s.shift(),v+=s.shift(),e$jscomp$0.U.P.lineTo(o,l,v);c=l+s.shift();p=v+s.shift();U=c+s.shift();g=p+s.shift();l=U+s.shift();v=g+s.shift();e$jscomp$0.U.P.curveTo(o,c,p,U,g,l,v)}else if("o26"==x)for(s.length%2&&(l+=s.shift());0<s.length;)c=l,p=v+s.shift(),l=U=c+s.shift(),v=(g=p+s.shift())+s.shift(),e$jscomp$0.U.P.curveTo(o,c,p,U,g,l,v);else if("o27"==x)for(s.length%2&&(v+=s.shift());0<s.length;)p=v,U=(c=
l+s.shift())+s.shift(),g=p+s.shift(),l=U+s.shift(),v=g,e$jscomp$0.U.P.curveTo(o,c,p,U,g,l,v);else if("o10"==x||"o29"==x)P="o10"==x?n:a,0==s.length?console.debug("error: empty stack"):(I=s.pop(),P=P.Subrs[I+P.Bias],t.x=l,t.y=v,t.nStems=i,t.haveWidth=h,t.width=f,t.open=d,e$jscomp$0.U._drawCFF(P,t,a,n,o),l=t.x,v=t.y,i=t.nStems,h=t.haveWidth,f=t.width,d=t.open);else if("o30"==x||"o31"==x)for(P=s.length,x=(I=0,"o31"==x),I+=P-(P&=-3);I<P;)x?(p=v,U=(c=l+s.shift())+s.shift(),v=(g=p+s.shift())+s.shift(),5==
P-I?(l=U+s.shift(),I++):l=U,x=!1):(c=l,p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),l=U+s.shift(),5==P-I?(v=g+s.shift(),I++):v=g,x=!0),e$jscomp$0.U.P.curveTo(o,c,p,U,g,l,v),I+=4;else{if("o"==(x+"").charAt(0))throw console.debug("Unknown operation: "+x,r),x;s.push(x)}}}t.x=l;t.y=v;t.nStems=i;t.haveWidth=h;t.width=f;t.open=d};var t$jscomp$0=e$jscomp$0,a$jscomp$0={Typr:t$jscomp$0};return r$jscomp$0.Typr=t$jscomp$0,r$jscomp$0.default=a$jscomp$0,Object.defineProperty(r$jscomp$0,"__esModule",{value:!0}),r$jscomp$0}({}).Typr},
function(){return function(r$jscomp$1){var e$jscomp$1=Uint8Array,n$jscomp$1=Uint16Array,t$jscomp$0=Uint32Array,a$jscomp$1=new e$jscomp$1([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),f$jscomp$0=new e$jscomp$1([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),i$jscomp$0=new e$jscomp$1([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o$jscomp$0=function(r,e){for(var a=new n$jscomp$1(31),f=0;31>f;++f)a[f]=e+=1<<r[f-1];r=new t$jscomp$0(a[30]);for(f=1;30>
f;++f)for(e=a[f];e<a[f+1];++e)r[e]=e-a[f]<<5|f;return[a,r]},u$jscomp$0=o$jscomp$0(a$jscomp$1,2),v$jscomp$0=u$jscomp$0[0];u$jscomp$0=u$jscomp$0[1];v$jscomp$0[28]=258;u$jscomp$0[258]=28;var l$jscomp$0=o$jscomp$0(f$jscomp$0,0)[0],c$jscomp$0=new n$jscomp$1(32768);for(o$jscomp$0=0;32768>o$jscomp$0;++o$jscomp$0)u$jscomp$0=(43690&o$jscomp$0)>>>1|(21845&o$jscomp$0)<<1,u$jscomp$0=(61680&(u$jscomp$0=(52428&u$jscomp$0)>>>2|(13107&u$jscomp$0)<<2))>>>4|(3855&u$jscomp$0)<<4,c$jscomp$0[o$jscomp$0]=((65280&u$jscomp$0)>>>
8|(255&u$jscomp$0)<<8)>>>1;var w$jscomp$0=function(r,e,t){for(var a=r.length,f=0,i=new n$jscomp$1(e);f<a;++f)++i[r[f]-1];var u=new n$jscomp$1(e);for(f=0;f<e;++f)u[f]=u[f-1]+i[f-1]<<1;if(t)for(t=new n$jscomp$1(1<<e),i=15-e,f=0;f<a;++f){if(r[f]){var s=f<<4|r[f],l=e-r[f],g=u[r[f]-1]++<<l;for(l=g|(1<<l)-1;g<=l;++g)t[c$jscomp$0[g]>>>i]=s}}else for(t=new n$jscomp$1(a),f=0;f<a;++f)t[f]=c$jscomp$0[u[r[f]-1]++]>>>15-r[f];return t};u$jscomp$0=new e$jscomp$1(288);for(o$jscomp$0=0;144>o$jscomp$0;++o$jscomp$0)u$jscomp$0[o$jscomp$0]=
8;for(o$jscomp$0=144;256>o$jscomp$0;++o$jscomp$0)u$jscomp$0[o$jscomp$0]=9;for(o$jscomp$0=256;280>o$jscomp$0;++o$jscomp$0)u$jscomp$0[o$jscomp$0]=7;for(o$jscomp$0=280;288>o$jscomp$0;++o$jscomp$0)u$jscomp$0[o$jscomp$0]=8;var b$jscomp$0=new e$jscomp$1(32);for(o$jscomp$0=0;32>o$jscomp$0;++o$jscomp$0)b$jscomp$0[o$jscomp$0]=5;var p$jscomp$0=w$jscomp$0(u$jscomp$0,9,1),d=w$jscomp$0(b$jscomp$0,5,1),L=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},y=function(r,e,n){var t=e/8>>0;return(r[t]|
r[t+1]<<8)>>>(7&e)&n},U=function(r,e){var n=e/8>>0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>>(7&e)},O$jscomp$0=function(r$jscomp$0,o,u){var s=r$jscomp$0.length,c=!o||u,g=!u||u.i;u||(u={});o||(o=new e$jscomp$1(3*s));var h,m=function(r){var n=o.length;r>n&&(r=new e$jscomp$1(Math.max(2*n,r)),r.set(o),o=r)},b=u.f||0,O=u.p||0,A=u.b||0,k=u.l,x=u.d,E=u.m,T=u.n,F=8*s;do{if(!k){u.f=b=y(r$jscomp$0,O,1);var V=y(r$jscomp$0,O+1,3);if(O+=3,!V){O=r$jscomp$0[(I=((h=O)/8>>0)+(7&h&&1)+4)-4]|r$jscomp$0[I-3]<<8;V=I+O;if(V>
s){if(g)throw"unexpected EOF";break}c&&m(A+O);o.set(r$jscomp$0.subarray(I,V),A);u.b=A+=O;u.p=O=8*V;continue}if(1==V)k=p$jscomp$0,x=d,E=9,T=5;else{if(2!=V)throw"invalid block type";E=y(r$jscomp$0,O,31)+257;x=y(r$jscomp$0,O+10,15)+4;k=E+y(r$jscomp$0,O+5,31)+1;O+=14;T=new e$jscomp$1(k);var z=new e$jscomp$1(19);for(V=0;V<x;++V)z[i$jscomp$0[V]]=y(r$jscomp$0,O+3*V,7);O+=3*x;V=L(z);x=(1<<V)-1;if(!g&&O+k*(V+7)>F)break;var H=w$jscomp$0(z,V,1);for(V=0;V<k;){var I;I=H[y(r$jscomp$0,O,x)];if(O+=15&I,16>(I>>>=
4))T[V++]=I;else{var N=z=0;for(16==I?(N=3+y(r$jscomp$0,O,3),O+=2,z=T[V-1]):17==I?(N=3+y(r$jscomp$0,O,7),O+=3):18==I&&(N=11+y(r$jscomp$0,O,127),O+=7);N--;)T[V++]=z}}k=T.subarray(0,E);V=T.subarray(E);E=L(k);T=L(V);k=w$jscomp$0(k,E,1);x=w$jscomp$0(V,T,1)}if(O>F)throw"unexpected EOF";}c&&m(A+131072);H=(1<<E)-1;N=(1<<T)-1;for(var X=E+T+18;g||O+X<F;){V=(z=k[U(r$jscomp$0,O)&H])>>>4;if((O+=15&z)>F)throw"unexpected EOF";if(!z)throw"invalid length/literal";if(256>V)o[A++]=V;else{if(256==V){k=null;break}z=V-
254;if(264<V){var $=a$jscomp$1[V-=257];z=y(r$jscomp$0,O,(1<<$)-1)+v$jscomp$0[V];O+=$}V=x[U(r$jscomp$0,O)&N];$=V>>>4;if(!V)throw"invalid distance";O+=15&V;V=l$jscomp$0[$];3<$&&($=f$jscomp$0[$],V+=U(r$jscomp$0,O)&(1<<$)-1,O+=$);if(O>F)throw"unexpected EOF";c&&m(A+131072);for(z=A+z;A<z;A+=4)o[A]=o[A-V],o[A+1]=o[A+1-V],o[A+2]=o[A+2-V],o[A+3]=o[A+3-V];A=z}}u.l=k;u.p=O;u.b=A;k&&(b=1,u.m=E,u.d=x,u.n=T)}while(!b);return A==o.length?o:function(r,a,f){(null==a||0>a)&&(a=0);(null==f||f>r.length)&&(f=r.length);
var i=new (r instanceof n$jscomp$1?n$jscomp$1:r instanceof t$jscomp$0?t$jscomp$0:e$jscomp$1)(f-a);return i.set(r.subarray(a,f)),i}(o,0,A)};return r$jscomp$1.convert_streams=function(r$jscomp$0){function t(){var r=e$jscomp$0.getUint16(n$jscomp$0);return n$jscomp$0+=2,r}function a$jscomp$0(){var r=e$jscomp$0.getUint32(n$jscomp$0);return n$jscomp$0+=4,r}function f(r){b.setUint16(p,r);p+=2}function i(r){b.setUint32(p,r);p+=4}var e$jscomp$0=new DataView(r$jscomp$0),n$jscomp$0=0;a$jscomp$0();var JSCompiler_object_inline_flavor_1775=
a$jscomp$0();a$jscomp$0();var JSCompiler_object_inline_numTables_1777=t();t();a$jscomp$0();t();t();a$jscomp$0();a$jscomp$0();a$jscomp$0();a$jscomp$0();a$jscomp$0();for(var u=0;Math.pow(2,u)<=JSCompiler_object_inline_numTables_1777;)u++;u--;for(var v=16*Math.pow(2,u),s=16*JSCompiler_object_inline_numTables_1777-v,l=12,c=[],g=0;g<JSCompiler_object_inline_numTables_1777;g++)c.push({tag:a$jscomp$0(),offset:a$jscomp$0(),compLength:a$jscomp$0(),origLength:a$jscomp$0(),origChecksum:a$jscomp$0()}),l+=16;
var h,w=new Uint8Array(12+16*c.length+c.reduce(function(r,e){return r+e.origLength+4},0));g=w.buffer;var b=new DataView(g),p=0;return i(JSCompiler_object_inline_flavor_1775),f(JSCompiler_object_inline_numTables_1777),f(v),f(u),f(s),c.forEach(function(r){i(r.tag);i(r.origChecksum);i(l);i(r.origLength);r.outOffset=l;0!=(l+=r.origLength)%4&&(l+=4-l%4)}),c.forEach(function(e){var n=r$jscomp$0.slice(e.offset,e.offset+e.compLength);if(e.compLength!=e.origLength){var a=new Uint8Array(e.origLength);n=new Uint8Array(n,
2);O$jscomp$0(n,a)}else a=new Uint8Array(n);w.set(a,e.outOffset);a=0;0!=(l=e.outOffset+e.origLength)%4&&(a=4-l%4);w.set((new Uint8Array(a)).buffer,e.outOffset+e.origLength);h=l+a}),g.slice(0,h)},r$jscomp$1}({}).convert_streams},function(Typr,woff2otf){function getCharJoiningType(ch){if(!joiningTypeMap){const m={R:2,L:1,D:4,C:16,U:32,T:8};joiningTypeMap=new Map;for(let type in joiningTypeRawData){let lastCode=0;joiningTypeRawData[type].split(",").forEach(range=>{let [skip,step]=range.split("+");skip=
parseInt(skip,36);step=step?parseInt(step,36):0;joiningTypeMap.set(lastCode+=skip,m[type]);for(range=step;range--;)joiningTypeMap.set(++lastCode,m[type])})}}return joiningTypeMap.get(ch)||32}function stringToGlyphs(font,str$jscomp$0){const glyphIds=[];for(let i=0;i<str$jscomp$0.length;i++){const cc=str$jscomp$0.codePointAt(i);65535<cc&&i++;glyphIds.push(Typr.U.codeToGlyph(font,cc))}if(font=font.GSUB){const {lookupList,featureList}=font;let joiningForms$jscomp$0;const supportedFeatures=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,
usedLookups=[];featureList.forEach(feature=>{if(supportedFeatures.test(feature.tag))for(let ti=0;ti<feature.tab.length;ti++){if(usedLookups[feature.tab[ti]])continue;usedLookups[feature.tab[ti]]=!0;const tab=lookupList[feature.tab[ti]],isJoiningFeature=/^(isol|init|fina|medi)$/.test(feature.tag);if(isJoiningFeature&&!joiningForms$jscomp$0){var str=str$jscomp$0;const joiningForms=new Uint8Array(str.length);let prevJoiningType=32,prevForm=1,prevIndex=-1;for(let i=0;i<str.length;i++){const code=str.codePointAt(i);
let joiningType=getCharJoiningType(code)|0,form=1;joiningType&8||(prevJoiningType&21?joiningType&22?(form=3,1!==prevForm&&3!==prevForm||joiningForms[prevIndex]++):joiningType&33&&(2===prevForm||4===prevForm)&&joiningForms[prevIndex]--:prevJoiningType&34&&(2===prevForm||4===prevForm)&&joiningForms[prevIndex]--,prevForm=joiningForms[i]=form,prevJoiningType=joiningType,prevIndex=i,65535<code&&i++)}joiningForms$jscomp$0=joiningForms}for(str=0;str<glyphIds.length;str++)joiningForms$jscomp$0&&isJoiningFeature&&
formsToFeatures[joiningForms$jscomp$0[str]]!==feature.tag||Typr.U._applySubs(glyphIds,str,tab,lookupList)}})}return glyphIds}function wrapFontObj(typrFont){const glyphMap=Object.create(null),fontObj={unitsPerEm:typrFont.head.unitsPerEm,ascender:typrFont.hhea.ascender,descender:typrFont.hhea.descender,forEachGlyph(text,fontSize,letterSpacing,callback$jscomp$0){let glyphX=0;const fontScale=1/fontObj.unitsPerEm*fontSize;let charIndex=0,prevGlyphIndex=-1;stringToGlyphs(typrFont,text).forEach((glyphIndex,
i$jscomp$0)=>{if(-1!==glyphIndex){i$jscomp$0=glyphMap[glyphIndex];if(!i$jscomp$0){const {cmds,crds}=Typr.U.glyphToPath(typrFont,glyphIndex);let yMin,xMax,yMax;if(crds.length){i$jscomp$0=yMin=Infinity;xMax=yMax=-Infinity;for(let i=0,len=crds.length;i<len;i+=2){let x=crds[i],y=crds[i+1];x<i$jscomp$0&&(i$jscomp$0=x);y<yMin&&(yMin=y);x>xMax&&(xMax=x);y>yMax&&(yMax=y)}}else i$jscomp$0=xMax=yMin=yMax=0;i$jscomp$0=glyphMap[glyphIndex]={index:glyphIndex,advanceWidth:typrFont.hmtx.aWidth[glyphIndex],xMin:i$jscomp$0,
yMin,xMax,yMax,pathCommandCount:cmds.length,forEachPathCommand(callback){let argsIndex=0;const argsArray=[];for(let i=0,len=cmds.length;i<len;i++){const numArgs=cmdArgLengths[cmds[i]];argsArray.length=1+numArgs;argsArray[0]=cmds[i];for(let j=1;j<=numArgs;j++)argsArray[j]=crds[argsIndex++];callback.apply(null,argsArray)}}}}-1!==prevGlyphIndex&&(glyphX+=Typr.U.getPairAdjustment(typrFont,prevGlyphIndex,glyphIndex)*fontScale);callback$jscomp$0.call(null,i$jscomp$0,glyphX,charIndex);i$jscomp$0.advanceWidth&&
(glyphX+=i$jscomp$0.advanceWidth*fontScale);letterSpacing&&(glyphX+=letterSpacing*fontSize);prevGlyphIndex=glyphIndex}charIndex+=65535<text.codePointAt(charIndex)?2:1});return glyphX}};return fontObj}const cmdArgLengths={M:2,L:2,Q:4,C:6,Z:0},joiningTypeRawData={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",
R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};
let joiningTypeMap;const formsToFeatures=[null,"isol","init","fina","medi"];return function(buffer){var peek=new Uint8Array(buffer,0,4);peek=Typr._bin.readASCII(peek,0,4);if("wOFF"===peek)buffer=woff2otf(buffer);else if("wOF2"===peek)throw Error("woff2 fonts not supported");return wrapFontObj(Typr.parse(buffer)[0])}}],init(typrFactory,woff2otfFactory,parserFactory){typrFactory=typrFactory();woff2otfFactory=woff2otfFactory();return parserFactory(typrFactory,woff2otfFactory)}});const CONFIG={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",
sdfGlyphSize:64,sdfMargin:.0625,sdfExponent:9,textureWidth:2048},tempColor=new _three.Color;let hasRequested=!1;const atlases=Object.create(null);let linkEl;require=(0,global.defineWorkerModule)({name:"FontProcessor",dependencies:[CONFIG,require,function(){function sortSegments(){needsSort&&(segments.sort(function(a,b){return a.maxX-b.maxX}),needsSort=!1)}let needsSort=!1;const segments=[];return{addLineSegment:function(x0,y0,x1,y1){segments.push({x0,y0,x1,y1,minX:Math.min(x0,x1),minY:Math.min(y0,
y1),maxX:Math.max(x0,x1),maxY:Math.max(y0,y1)});needsSort=!0},findNearestSignedDistance:function(x,y){sortSegments();var closestDistSq=Infinity;let closestDist=Infinity;for(var i=segments.length;i--;){var seg=segments[i];if(seg.maxX+closestDist<=x)break;if(x+closestDist>seg.minX&&y-closestDist<seg.maxY&&y+closestDist>seg.minY){var lineX0=seg.x0,lineY0=seg.y0;const ldx=seg.x1-lineX0;seg=seg.y1-lineY0;var lengthSq=ldx*ldx+seg*seg;lengthSq=lengthSq?Math.max(0,Math.min(1,((x-lineX0)*ldx+(y-lineY0)*seg)/
lengthSq)):0;lineX0=x-(lineX0+lengthSq*ldx);lineY0=y-(lineY0+lengthSq*seg);lineY0=lineX0*lineX0+lineY0*lineY0;lineY0<closestDistSq&&(closestDistSq=lineY0,closestDist=Math.sqrt(closestDistSq))}}sortSegments();closestDistSq=!1;for(i=segments.length;i--;){lineY0=segments[i];if(lineY0.maxX<=x)break;lineY0.minY<y&&lineY0.maxY>y&&lineY0.y0>y!==lineY0.y1>y&&x<(lineY0.x1-lineY0.x0)*(y-lineY0.y0)/(lineY0.y1-lineY0.y0)+lineY0.x0&&(closestDistSq=!closestDistSq)}closestDistSq&&(closestDist=-closestDist);return closestDist}}},
function(createGlyphSegmentsIndex,config){const {sdfExponent,sdfMargin}=config;return function(glyphObj,sdfSize){const textureData=new Uint8Array(sdfSize*sdfSize);var glyphW=glyphObj.xMax-glyphObj.xMin,glyphH=glyphObj.yMax-glyphObj.yMin;const fontUnitsMaxSearchDist=Math.max(glyphW,glyphH);var fontUnitsMargin=Math.max(glyphW,glyphH)/sdfSize*(sdfMargin*sdfSize+.5);glyphW=glyphObj.xMin-fontUnitsMargin;glyphH=glyphObj.yMin-fontUnitsMargin;const textureMaxFontX=glyphObj.xMax+fontUnitsMargin;fontUnitsMargin=
glyphObj.yMax+fontUnitsMargin;const fontUnitsTextureWidth=textureMaxFontX-glyphW,fontUnitsTextureHeight=fontUnitsMargin-glyphH,fontUnitsTextureMaxDim=Math.max(fontUnitsTextureWidth,fontUnitsTextureHeight);if(glyphObj.pathCommandCount){const lineSegmentsIndex=createGlyphSegmentsIndex(glyphObj);let firstX,firstY,prevX,prevY;glyphObj.forEachPathCommand((type,x0,y0,x1,y1,x2,y2)=>{switch(type){case "M":prevX=firstX=x0;prevY=firstY=y0;break;case "L":x0===prevX&&y0===prevY||lineSegmentsIndex.addLineSegment(prevX,
prevY,prevX=x0,prevY=y0);break;case "Q":x2={x:prevX,y:prevY};for(y2=1;16>y2;y2++){type=y2/15;var t2$jscomp$0=1-type;type={x:t2$jscomp$0*t2$jscomp$0*prevX+2*t2$jscomp$0*type*x0+type*type*x1,y:t2$jscomp$0*t2$jscomp$0*prevY+2*t2$jscomp$0*type*y0+type*type*y1};lineSegmentsIndex.addLineSegment(x2.x,x2.y,type.x,type.y);x2=type}prevX=x1;prevY=y1;break;case "C":type={x:prevX,y:prevY};for(t2$jscomp$0=1;16>t2$jscomp$0;t2$jscomp$0++){var t=t2$jscomp$0/15;const t2=1-t;t={x:t2*t2*t2*prevX+3*t2*t2*t*x0+3*t2*t*
t*x1+t*t*t*x2,y:t2*t2*t2*prevY+3*t2*t2*t*y0+3*t2*t*t*y1+t*t*t*y2};lineSegmentsIndex.addLineSegment(type.x,type.y,t.x,t.y);type=t}prevX=x2;prevY=y2;break;case "Z":prevX===firstX&&prevY===firstY||lineSegmentsIndex.addLineSegment(prevX,prevY,firstX,firstY)}});for(glyphObj=0;glyphObj<sdfSize;glyphObj++)for(let sdfY=0;sdfY<sdfSize;sdfY++){const signedDist=lineSegmentsIndex.findNearestSignedDistance(glyphW+fontUnitsTextureWidth*(glyphObj+.5)/sdfSize,glyphH+fontUnitsTextureHeight*(sdfY+.5)/sdfSize,fontUnitsMaxSearchDist);
let alpha=Math.pow(1-Math.abs(signedDist)/fontUnitsTextureMaxDim,sdfExponent)/2;0>signedDist&&(alpha=1-alpha);alpha=Math.max(0,Math.min(255,Math.round(255*alpha)));textureData[sdfY*sdfSize+glyphObj]=alpha}}return{textureData,renderingBounds:[glyphW,glyphH,textureMaxFontX,fontUnitsMargin]}}},function(fontParser,sdfGenerator,bidi,config){function doLoadFont(url,callback){function tryLoad(){const onError=err=>{console.error(`Failure loading font ${url}${url===defaultFontURL?"":"; trying fallback"}`,
err);url!==defaultFontURL&&(url=defaultFontURL,tryLoad())};try{const request=new XMLHttpRequest;request.open("get",url,!0);request.responseType="arraybuffer";request.onload=function(){if(400<=request.status)onError(Error(request.statusText));else if(0<request.status)try{const fontObj=fontParser(request.response);callback(fontObj)}catch(e){onError(e)}};request.onerror=onError;request.send()}catch(err){onError(err)}}tryLoad()}function loadFont(fontUrl,callback){fontUrl||(fontUrl=defaultFontURL);let font=
fonts[fontUrl];font?font.pending?font.pending.push(callback):callback(font):(fonts[fontUrl]={pending:[callback]},doLoadFont(fontUrl,fontObj=>{let callbacks=fonts[fontUrl].pending;fonts[fontUrl]=fontObj;callbacks.forEach(cb=>cb(fontObj))}))}function getSdfAtlas(fontUrl,sdfGlyphSize,callback){fontUrl||(fontUrl=defaultFontURL);let atlasKey=`${fontUrl}@${sdfGlyphSize}`,atlas=fontAtlases[atlasKey];atlas?callback(atlas):loadFont(fontUrl,fontObj=>{atlas=fontAtlases[atlasKey]||(fontAtlases[atlasKey]={fontObj,
glyphs:{},glyphCount:0});callback(atlas)})}function process({text="",font=defaultFontURL,sdfGlyphSize=64,fontSize=1,letterSpacing=0,lineHeight="normal",maxWidth=Infinity,direction,textAlign="left",textIndent=0,whiteSpace="normal",overflowWrap="normal",anchorX=0,anchorY=0,includeCaretPositions=!1,chunkedBoundsSize=8192,colorRanges=null},callback,metricsOnly=!1){const mainStart=now(),timings={total:0,fontLoad:0,layout:0,sdf:{},sdfTotal:0};-1<text.indexOf("\r")&&(console.warn("FontProcessor.process: got text with \\r chars; normalizing to \\n"),
text=text.replace(/\r\n/g,"\n").replace(/\r/g,"\n"));fontSize=+fontSize;letterSpacing=+letterSpacing;maxWidth=+maxWidth;lineHeight=lineHeight||"normal";textIndent=+textIndent;getSdfAtlas(font,sdfGlyphSize,atlas=>{const fontObj=atlas.fontObj,hasMaxWidth=isFinite(maxWidth);let newGlyphs=null,glyphBounds=null,glyphAtlasIndices=null,glyphColors=null,caretPositions=null,visibleBounds=null,chunkedBounds=null,maxLineWidth=0,renderableGlyphCount=0,canWrap="nowrap"!==whiteSpace;const {ascender,descender,unitsPerEm}=
fontObj;timings.fontLoad=now()-mainStart;const layoutStart=now(),fontSizeMult=fontSize/unitsPerEm;"normal"===lineHeight&&(lineHeight=(ascender-descender)/unitsPerEm);lineHeight*=fontSize;const halfLeading=(lineHeight-(ascender-descender)*fontSizeMult)/2,topBaseline=-(ascender*fontSizeMult+halfLeading),caretHeight=Math.min(lineHeight,(ascender-descender)*fontSizeMult),caretBottomOffset=(ascender+descender)/2*fontSizeMult-caretHeight/2;let lineXOffset=textIndent,currentLine=new TextLine;const lines=
[currentLine];fontObj.forEachGlyph(text,fontSize,letterSpacing,(glyphObj,glyphX,charIndex)=>{const char=text.charAt(charIndex),glyphWidth=glyphObj.advanceWidth*fontSizeMult;var curLineCount=currentLine.count;"isEmpty"in glyphObj||(glyphObj.isWhitespace=!!char&&/\s/.test(char),glyphObj.isEmpty=glyphObj.xMin===glyphObj.xMax||glyphObj.yMin===glyphObj.yMax||DEFAULT_IGNORABLE_CHARS.test(char));glyphObj.isWhitespace||glyphObj.isEmpty||renderableGlyphCount++;if(canWrap&&hasMaxWidth&&!glyphObj.isWhitespace&&
glyphX+glyphWidth+lineXOffset>maxWidth&&curLineCount){if(currentLine.glyphAt(curLineCount-1).glyphObj.isWhitespace){var nextLine=new TextLine;lineXOffset=-glyphX}else for(;curLineCount--;)if(0===curLineCount&&"break-word"===overflowWrap){nextLine=new TextLine;lineXOffset=-glyphX;break}else if(currentLine.glyphAt(curLineCount).glyphObj.isWhitespace){nextLine=currentLine.splitAt(curLineCount+1);curLineCount=nextLine.glyphAt(0).x;lineXOffset-=curLineCount;for(let j=nextLine.count;j--;)nextLine.glyphAt(j).x-=
curLineCount;break}nextLine&&(currentLine.isSoftWrapped=!0,currentLine=nextLine,lines.push(currentLine),maxLineWidth=maxWidth)}nextLine=currentLine.glyphAt(currentLine.count);nextLine.glyphObj=glyphObj;nextLine.x=glyphX+lineXOffset;nextLine.width=glyphWidth;nextLine.charIndex=charIndex;"\n"===char&&(currentLine=new TextLine,lines.push(currentLine),lineXOffset=-(glyphX+glyphWidth+letterSpacing*fontSize)+textIndent)});lines.forEach(line=>{for(let i=line.count;i--;){let {glyphObj,x,width}=line.glyphAt(i);
if(!glyphObj.isWhitespace){line.width=x+width;line.width>maxLineWidth&&(maxLineWidth=line.width);break}}});let anchorXOffset=0,anchorYOffset=0;anchorX&&("number"===typeof anchorX?anchorXOffset=-anchorX:"string"===typeof anchorX&&(anchorXOffset=-maxLineWidth*("left"===anchorX?0:"center"===anchorX?.5:"right"===anchorX?1:parsePercent(anchorX))));if(anchorY)if("number"===typeof anchorY)anchorYOffset=-anchorY;else if("string"===typeof anchorY){let height=lines.length*lineHeight;anchorYOffset="top"===anchorY?
0:"top-baseline"===anchorY?-topBaseline:"middle"===anchorY?height/2:"bottom"===anchorY?height:"bottom-baseline"===anchorY?height-halfLeading+descender*fontSizeMult:parsePercent(anchorY)*height}if(!metricsOnly){const bidiLevelsResult=bidi.getEmbeddingLevels(text,direction);glyphBounds=new Float32Array(4*renderableGlyphCount);glyphAtlasIndices=new Float32Array(renderableGlyphCount);visibleBounds=[Infinity,Infinity,-Infinity,-Infinity];chunkedBounds=[];let lineYOffset=topBaseline;includeCaretPositions&&
(caretPositions=new Float32Array(3*text.length));colorRanges&&(glyphColors=new Uint8Array(3*renderableGlyphCount));let renderableGlyphIndex=0,prevCharIndex=-1,colorCharIndex=-1,chunk,currentColor;lines.forEach((line,lineIndex)=>{let {count:lineGlyphCount,width:lineWidth}=line;if(0<lineGlyphCount){lineIndex=0;for(var i=lineGlyphCount;i--&&line.glyphAt(i).glyphObj.isWhitespace;)lineIndex++;var justifyAdjust=i=0;if("center"===textAlign)i=(maxLineWidth-lineWidth)/2;else if("right"===textAlign)i=maxLineWidth-
lineWidth;else if("justify"===textAlign&&line.isSoftWrapped){justifyAdjust=0;for(var i$jscomp$0=lineGlyphCount-lineIndex;i$jscomp$0--;)line.glyphAt(i$jscomp$0).glyphObj.isWhitespace&&justifyAdjust++;justifyAdjust=(maxLineWidth-lineWidth)/justifyAdjust}if(justifyAdjust||i){i$jscomp$0=0;for(var i$jscomp$1=0;i$jscomp$1<lineGlyphCount;i$jscomp$1++){var glyphInfo=line.glyphAt(i$jscomp$1),glyphObj$jscomp$0=glyphInfo.glyphObj;glyphInfo.x+=i+i$jscomp$0;0!==justifyAdjust&&glyphObj$jscomp$0.isWhitespace&&i$jscomp$1<
lineGlyphCount-lineIndex&&(i$jscomp$0+=justifyAdjust,glyphInfo.width+=justifyAdjust)}}i=bidi.getReorderSegments(text,bidiLevelsResult,line.glyphAt(0).charIndex,line.glyphAt(line.count-1).charIndex);for(justifyAdjust=0;justifyAdjust<i.length;justifyAdjust++){const [start,end]=i[justifyAdjust];i$jscomp$0=Infinity;i$jscomp$1=-Infinity;for(glyphInfo=0;glyphInfo<lineGlyphCount;glyphInfo++)if(line.glyphAt(glyphInfo).charIndex>=start){for(glyphObj$jscomp$0=glyphInfo;glyphInfo<lineGlyphCount;glyphInfo++){var info=
line.glyphAt(glyphInfo);if(info.charIndex>end)break;glyphInfo<lineGlyphCount-lineIndex&&(i$jscomp$0=Math.min(i$jscomp$0,info.x),i$jscomp$1=Math.max(i$jscomp$1,info.x+info.width))}for(;glyphObj$jscomp$0<glyphInfo;glyphObj$jscomp$0++)info=line.glyphAt(glyphObj$jscomp$0),info.x=i$jscomp$1-(info.x+info.width-i$jscomp$0);break}}let glyphObj;lineIndex=g=>glyphObj=g;for(i=0;i<lineGlyphCount;i++){i$jscomp$0=line.glyphAt(i);glyphObj=i$jscomp$0.glyphObj;(justifyAdjust=bidiLevelsResult.levels[i$jscomp$0.charIndex]&
1)&&(i$jscomp$1=bidi.getMirroredCharacter(text[i$jscomp$0.charIndex]))&&fontObj.forEachGlyph(i$jscomp$1,0,0,lineIndex);if(includeCaretPositions){({charIndex:i$jscomp$1}=i$jscomp$0);glyphInfo=i$jscomp$0.x+anchorXOffset;glyphObj$jscomp$0=i$jscomp$0.x+i$jscomp$0.width+anchorXOffset;caretPositions[3*i$jscomp$1]=justifyAdjust?glyphObj$jscomp$0:glyphInfo;caretPositions[3*i$jscomp$1+1]=justifyAdjust?glyphInfo:glyphObj$jscomp$0;for(caretPositions[3*i$jscomp$1+2]=lineYOffset+caretBottomOffset+anchorYOffset;1<
i$jscomp$1-prevCharIndex;)caretPositions[3*(prevCharIndex+1)]=caretPositions[3*prevCharIndex],caretPositions[3*(prevCharIndex+1)+1]=caretPositions[3*prevCharIndex+1],caretPositions[3*(prevCharIndex+1)+2]=caretPositions[3*prevCharIndex+2],prevCharIndex++;prevCharIndex=i$jscomp$1}if(colorRanges)for({charIndex:justifyAdjust}=i$jscomp$0;justifyAdjust>colorCharIndex;)colorCharIndex++,colorRanges.hasOwnProperty(colorCharIndex)&&(currentColor=colorRanges[colorCharIndex]);if(!glyphObj.isWhitespace&&!glyphObj.isEmpty){justifyAdjust=
renderableGlyphIndex++;i$jscomp$1=atlas.glyphs[glyphObj.index];i$jscomp$1||(i$jscomp$1=now(),glyphInfo=sdfGenerator(glyphObj,sdfGlyphSize),timings.sdf[text.charAt(i$jscomp$0.charIndex)]=now()-i$jscomp$1,glyphInfo.atlasIndex=atlas.glyphCount++,newGlyphs||(newGlyphs=[]),newGlyphs.push(glyphInfo),i$jscomp$1=atlas.glyphs[glyphObj.index]={atlasIndex:glyphInfo.atlasIndex,glyphObj,renderingBounds:glyphInfo.renderingBounds});glyphInfo=i$jscomp$1.renderingBounds;glyphObj$jscomp$0=4*justifyAdjust;info=i$jscomp$0.x+
anchorXOffset;i$jscomp$0=lineYOffset+anchorYOffset;glyphBounds[glyphObj$jscomp$0]=info+glyphInfo[0]*fontSizeMult;glyphBounds[glyphObj$jscomp$0+1]=i$jscomp$0+glyphInfo[1]*fontSizeMult;glyphBounds[glyphObj$jscomp$0+2]=info+glyphInfo[2]*fontSizeMult;glyphBounds[glyphObj$jscomp$0+3]=i$jscomp$0+glyphInfo[3]*fontSizeMult;glyphInfo=info+glyphObj.xMin*fontSizeMult;glyphObj$jscomp$0=i$jscomp$0+glyphObj.yMin*fontSizeMult;info+=glyphObj.xMax*fontSizeMult;i$jscomp$0+=glyphObj.yMax*fontSizeMult;glyphInfo<visibleBounds[0]&&
(visibleBounds[0]=glyphInfo);glyphObj$jscomp$0<visibleBounds[1]&&(visibleBounds[1]=glyphObj$jscomp$0);info>visibleBounds[2]&&(visibleBounds[2]=info);i$jscomp$0>visibleBounds[3]&&(visibleBounds[3]=i$jscomp$0);0===justifyAdjust%chunkedBoundsSize&&(chunk={start:justifyAdjust,end:justifyAdjust,rect:[Infinity,Infinity,-Infinity,-Infinity]},chunkedBounds.push(chunk));chunk.end++;const chunkRect=chunk.rect;glyphInfo<chunkRect[0]&&(chunkRect[0]=glyphInfo);glyphObj$jscomp$0<chunkRect[1]&&(chunkRect[1]=glyphObj$jscomp$0);
info>chunkRect[2]&&(chunkRect[2]=info);i$jscomp$0>chunkRect[3]&&(chunkRect[3]=i$jscomp$0);glyphAtlasIndices[justifyAdjust]=i$jscomp$1.atlasIndex;colorRanges&&(justifyAdjust*=3,glyphColors[justifyAdjust]=currentColor>>16&255,glyphColors[justifyAdjust+1]=currentColor>>8&255,glyphColors[justifyAdjust+2]=currentColor&255)}}}lineYOffset-=lineHeight})}for(let ch in timings.sdf)timings.sdfTotal+=timings.sdf[ch];timings.layout=now()-layoutStart-timings.sdfTotal;timings.total=now()-mainStart;callback({glyphBounds,
glyphAtlasIndices,caretPositions,caretHeight,glyphColors,chunkedBounds,ascender:ascender*fontSizeMult,descender:descender*fontSizeMult,lineHeight,topBaseline,blockBounds:[anchorXOffset,anchorYOffset-lines.length*lineHeight,anchorXOffset+maxLineWidth,anchorYOffset],visibleBounds,newGlyphSDFs:newGlyphs,timings})})}function parsePercent(str){str=(str=str.match(/^([\d.]+)%$/))?parseFloat(str[1]):NaN;return isNaN(str)?0:str/100}function now(){return(self.performance||Date).now()}function TextLine(){this.data=
[]}const {defaultFontURL}=config,fontAtlases=Object.create(null),fonts=Object.create(null),DEFAULT_IGNORABLE_CHARS=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,textLineProps=["glyphObj","x","width","charIndex"];TextLine.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/textLineProps.length)},glyphAt(i){let fly=TextLine.flyweight;fly.data=this.data;fly.index=i;return fly},
splitAt(i){let newLine=new TextLine;newLine.data=this.data.splice(i*textLineProps.length);return newLine}};TextLine.flyweight=textLineProps.reduce((obj,prop,i,all)=>{Object.defineProperty(obj,prop,{get(){return this.data[this.index*textLineProps.length+i]},set(val){this.data[this.index*textLineProps.length+i]=val}});return obj},{data:null,index:0});return{process,measure:function(args,callback){process(args,result=>{const [x0,y0,x1,y1]=result.blockBounds;callback({width:x1-x0,height:y1-y0})},{metricsOnly:!0})},
loadFont}},module.default],init(config,fontParser,createGlyphSegmentsIndex,createSDFGenerator,createFontProcessor,bidiFactory){const {sdfExponent,sdfMargin,defaultFontURL}=config;config=createSDFGenerator(createGlyphSegmentsIndex,{sdfExponent,sdfMargin});return createFontProcessor(fontParser,config,bidiFactory(),{defaultFontURL})}});exports.fontProcessorWorkerModule=require;const processInWorker=(0,global.defineWorkerModule)({name:"TextBuilder",dependencies:[require,global.ThenableWorkerModule],init(fontProcessor,
Thenable){return function(args){const thenable=new Thenable;fontProcessor.process(args,thenable.resolve);return thenable}},getTransferables(result){const transferables=[result.glyphBounds.buffer,result.glyphAtlasIndices.buffer];result.caretPositions&&transferables.push(result.caretPositions.buffer);result.newGlyphSDFs&&result.newGlyphSDFs.forEach(d=>{transferables.push(d.textureData.buffer)});return transferables}}),GlyphsGeometry=(()=>{function getTemplateGeometry(detail){let geom=templateGeometries[detail];
geom||(geom=templateGeometries[detail]=(new _three.PlaneBufferGeometry(1,1,detail,detail)).translate(.5,.5,0));return geom}function updateBufferAttr(geom,attrName,newArray,itemSize){const attr=geom.getAttribute(attrName);newArray?attr&&attr.array.length===newArray.length?(attr.array.set(newArray),attr.needsUpdate=!0):(geom.setAttribute(attrName,new _three.InstancedBufferAttribute(newArray,itemSize)),delete geom._maxInstanceCount,geom.dispose()):attr&&geom.deleteAttribute(attrName)}function setInstanceCount(geom,
count){geom[geom.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=count}const templateGeometries={};new _three.Vector3;class GlyphsGeometry extends _three.InstancedBufferGeometry{constructor(){super();this.detail=1;this.curveRadius=0;this.groups=[{start:0,count:Infinity,materialIndex:0},{start:0,count:Infinity,materialIndex:1}];this.boundingSphere=new _three.Sphere;this.boundingBox=new _three.Box3}computeBoundingSphere(){}computeBoundingBox(){}set detail(detail){if(detail!==this._detail){this._detail=
detail;if("number"!==typeof detail||1>detail)detail=1;let tpl=getTemplateGeometry(detail);["position","normal","uv"].forEach(attr=>{this.attributes[attr]=tpl.attributes[attr].clone()});this.setIndex(tpl.getIndex().clone())}}get detail(){return this._detail}set curveRadius(r){r!==this._curveRadius&&(this._curveRadius=r,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(glyphBounds,glyphAtlasIndices,blockBounds,chunkedBounds,glyphColors){updateBufferAttr(this,"aTroikaGlyphBounds",
glyphBounds,4);updateBufferAttr(this,"aTroikaGlyphIndex",glyphAtlasIndices,1);updateBufferAttr(this,"aTroikaGlyphColor",glyphColors,3);this._blockBounds=blockBounds;this._chunkedBounds=chunkedBounds;setInstanceCount(this,glyphAtlasIndices.length);this._updateBounds()}_updateBounds(){const bounds=this._blockBounds;if(bounds){const {curveRadius,boundingBox:bbox}=this;if(curveRadius){const {PI,floor,min,max,sin,cos}=Math;var halfPi=PI/2,twoPi=2*PI;const absR=Math.abs(curveRadius),leftAngle=bounds[0]/
absR,rightAngle=bounds[2]/absR,minX=floor((leftAngle+halfPi)/twoPi)!==floor((rightAngle+halfPi)/twoPi)?-absR:min(sin(leftAngle)*absR,sin(rightAngle)*absR);halfPi=floor((leftAngle-halfPi)/twoPi)!==floor((rightAngle-halfPi)/twoPi)?absR:max(sin(leftAngle)*absR,sin(rightAngle)*absR);twoPi=floor((leftAngle+PI)/twoPi)!==floor((rightAngle+PI)/twoPi)?2*absR:max(absR-cos(leftAngle)*absR,absR-cos(rightAngle)*absR);bbox.min.set(minX,bounds[1],0>curveRadius?-twoPi:0);bbox.max.set(halfPi,bounds[3],0>curveRadius?
0:twoPi)}else bbox.min.set(bounds[0],bounds[1],0),bbox.max.set(bounds[2],bounds[3],0);bbox.getBoundingSphere(this.boundingSphere)}}applyClipRect(clipRect){let count=this.getAttribute("aTroikaGlyphIndex").count,chunks=this._chunkedBounds;if(chunks)for(let i=chunks.length;i--;){count=chunks[i].end;let rect=chunks[i].rect;if(rect[1]<clipRect.w&&rect[3]>clipRect.y&&rect[0]<clipRect.z&&rect[2]>clipRect.x)break}setInstanceCount(this,count)}}GlyphsGeometry.prototype.setAttribute||(GlyphsGeometry.prototype.setAttribute=
function(name,attribute){this.attributes[name]=attribute;return this});return GlyphsGeometry})();exports.GlyphsGeometry=GlyphsGeometry;require=(()=>{function first(o){return Array.isArray(o)?o[0]:o}const defaultMaterial=new _three.MeshBasicMaterial({color:16777215,side:_three.DoubleSide,transparent:!0}),tempMat4=new _three.Matrix4,tempVec3a=new _three.Vector3,tempVec3b=new _three.Vector3,tempArray=[],origin=new _three.Vector3;let getFlatRaycastMesh=()=>{const mesh=new _three.Mesh(new _three.PlaneBufferGeometry(1,
1),defaultMaterial);getFlatRaycastMesh=()=>mesh;return mesh},getCurvedRaycastMesh=()=>{const mesh=new _three.Mesh(new _three.PlaneBufferGeometry(1,1,32,1),defaultMaterial);getCurvedRaycastMesh=()=>mesh;return mesh};const syncStartEvent={type:"syncstart"},syncCompleteEvent={type:"synccomplete"},SYNCABLE_PROPS="font fontSize letterSpacing lineHeight maxWidth overflowWrap text direction textAlign textIndent whiteSpace anchorX anchorY colorRanges sdfGlyphSize".split(" "),COPYABLE_PROPS=SYNCABLE_PROPS.concat("material",
"color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class Text extends _three.Mesh{constructor(){super(new GlyphsGeometry,null);this.text="";this.curveRadius=this.anchorY=this.anchorX=0;this.direction="auto";this.font=null;this.fontSize=.1;this.letterSpacing=0;this.lineHeight="normal";this.maxWidth=Infinity;this.overflowWrap="normal";this.textAlign="left";this.textIndent=0;this.whiteSpace="normal";this.colorRanges=this.color=this.material=null;this.outlineColor=this.outlineWidth=
0;this.outlineOpacity=1;this.strokeWidth=this.outlineOffsetY=this.outlineOffsetX=this.outlineBlur=0;this.strokeColor=8421504;this.fillOpacity=this.strokeOpacity=1;this.depthOffset=0;this.clipRect=null;this.orientation="+x+y";this.glyphGeometryDetail=1;this.sdfGlyphSize=null;this.debugSDF=!1}sync(callback){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(callback):(this._isSyncing=!0,this.dispatchEvent(syncStartEvent),getTextRenderInfo({text:this.text,
font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize},textRenderInfo=>{this._isSyncing=!1;this._textRenderInfo=textRenderInfo;this.geometry.updateGlyphs(textRenderInfo.glyphBounds,
textRenderInfo.glyphAtlasIndices,textRenderInfo.blockBounds,textRenderInfo.chunkedBounds,textRenderInfo.glyphColors);const queued=this._queuedSyncs;queued&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{queued.forEach(fn=>fn&&fn())}));this.dispatchEvent(syncCompleteEvent);callback&&callback()})))}onBeforeRender(renderer,scene,camera,geometry,material,group){this.sync();material.isTroikaTextMaterial&&this._prepareForRender(material)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||
null}get material(){let derivedMaterial=this._derivedMaterial;const baseMaterial=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=defaultMaterial.clone());derivedMaterial&&derivedMaterial.baseMaterial===baseMaterial||(derivedMaterial=this._derivedMaterial=createTextDerivedMaterial(baseMaterial),baseMaterial.addEventListener("dispose",function onDispose(){baseMaterial.removeEventListener("dispose",onDispose);derivedMaterial.dispose()}));if(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||
this.outlineOffsetY){let outlineMaterial=derivedMaterial._outlineMtl;outlineMaterial||(outlineMaterial=derivedMaterial._outlineMtl=Object.create(derivedMaterial,{id:{value:derivedMaterial.id+.1}}),outlineMaterial.isTextOutlineMaterial=!0,outlineMaterial.depthWrite=!1,outlineMaterial.map=null,derivedMaterial.addEventListener("dispose",function onDispose(){derivedMaterial.removeEventListener("dispose",onDispose);outlineMaterial.dispose()}));return[outlineMaterial,derivedMaterial]}return derivedMaterial}set material(baseMaterial){baseMaterial&&
baseMaterial.isTroikaTextMaterial?(this._derivedMaterial=baseMaterial,this._baseMaterial=baseMaterial.baseMaterial):this._baseMaterial=baseMaterial}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(detail){this.geometry.detail=detail}get curveRadius(){return this.geometry.curveRadius}set curveRadius(r){this.geometry.curveRadius=r}get customDepthMaterial(){return first(this.material).getDepthMaterial()}get customDistanceMaterial(){return first(this.material).getDistanceMaterial()}_prepareForRender(material){var isOutline=
material.isTextOutlineMaterial,uniforms=material.uniforms,textInfo=this.textRenderInfo;if(textInfo){const {sdfTexture,blockBounds}=textInfo;uniforms.uTroikaSDFTexture.value=sdfTexture;uniforms.uTroikaSDFTextureSize.value.set(sdfTexture.image.width,sdfTexture.image.height);uniforms.uTroikaSDFGlyphSize.value=textInfo.sdfGlyphSize;uniforms.uTroikaSDFExponent.value=textInfo.sdfExponent;uniforms.uTroikaTotalBounds.value.fromArray(blockBounds);uniforms.uTroikaUseGlyphColors.value=!isOutline&&!!textInfo.glyphColors;
let blurRadius=textInfo=0,strokeWidth=0,fillOpacity;let offsetX=0,offsetY=0;if(isOutline){let {outlineWidth,outlineOffsetX,outlineOffsetY,outlineBlur,outlineOpacity}=this;textInfo=this._parsePercent(outlineWidth)||0;blurRadius=Math.max(0,this._parsePercent(outlineBlur)||0);fillOpacity=outlineOpacity;offsetX=this._parsePercent(outlineOffsetX)||0;offsetY=this._parsePercent(outlineOffsetY)||0}else{if(strokeWidth=Math.max(0,this._parsePercent(this.strokeWidth)||0)){var strokeOpacity=this.strokeColor;
uniforms.uTroikaStrokeColor.value.set(null==strokeOpacity?8421504:strokeOpacity);strokeOpacity=this.strokeOpacity;null==strokeOpacity&&(strokeOpacity=1)}fillOpacity=this.fillOpacity}uniforms.uTroikaDistanceOffset.value=textInfo;uniforms.uTroikaPositionOffset.value.set(offsetX,offsetY);uniforms.uTroikaBlurRadius.value=blurRadius;uniforms.uTroikaStrokeWidth.value=strokeWidth;uniforms.uTroikaStrokeOpacity.value=strokeOpacity;uniforms.uTroikaFillOpacity.value=null==fillOpacity?1:fillOpacity;uniforms.uTroikaCurveRadius.value=
this.curveRadius||0;(textInfo=this.clipRect)&&Array.isArray(textInfo)&&4===textInfo.length?uniforms.uTroikaClipRect.value.fromArray(textInfo):(textInfo=100*(this.fontSize||.1),uniforms.uTroikaClipRect.value.set(blockBounds[0]-textInfo,blockBounds[1]-textInfo,blockBounds[2]+textInfo,blockBounds[3]+textInfo));this.geometry.applyClipRect(uniforms.uTroikaClipRect.value)}uniforms.uTroikaSDFDebug.value=!!this.debugSDF;material.polygonOffset=!!this.depthOffset;material.polygonOffsetFactor=material.polygonOffsetUnits=
this.depthOffset||0;isOutline=isOutline?this.outlineColor||0:this.color;null==isOutline?delete material.color:(textInfo=material.hasOwnProperty("color")?material.color:material.color=new _three.Color,(isOutline!==textInfo._input||"object"===typeof isOutline)&&textInfo.set(textInfo._input=isOutline));isOutline=this.orientation||"+x+y";if(isOutline!==material._orientation){uniforms=uniforms.uTroikaOrient.value;isOutline=isOutline.replace(/[^-+xyz]/g,"");if(textInfo="+x+y"!==isOutline&&isOutline.match(/^([-+])([xyz])([-+])([xyz])$/)){let [,
hSign,hAxis,vSign,vAxis]=textInfo;tempVec3a.set(0,0,0)[hAxis]="-"===hSign?1:-1;tempVec3b.set(0,0,0)[vAxis]="-"===vSign?-1:1;tempMat4.lookAt(origin,tempVec3a.cross(tempVec3b),tempVec3b);uniforms.setFromMatrix4(tempMat4)}else uniforms.identity();material._orientation=isOutline}}_parsePercent(value){"string"===typeof value&&(value=(value=value.match(/^(-?[\d.]+)%$/))?parseFloat(value[1]):NaN,value=(isNaN(value)?0:value/100)*this.fontSize);return value}localPositionToTextCoords(position,target=new _three.Vector2){target.copy(position);
const r=this.curveRadius;r&&(target.x=Math.atan2(position.x,Math.abs(r)-Math.abs(position.z))*Math.abs(r));return target}worldPositionToTextCoords(position,target=new _three.Vector2){tempVec3a.copy(position);return this.localPositionToTextCoords(this.worldToLocal(tempVec3a),target)}raycast(raycaster,intersects){const {textRenderInfo,curveRadius}=this;if(textRenderInfo){const bounds=textRenderInfo.blockBounds,raycastMesh=curveRadius?getCurvedRaycastMesh():getFlatRaycastMesh(),geom=raycastMesh.geometry,
{position,uv}=geom.attributes;for(let i=0;i<uv.count;i++){let x=bounds[0]+uv.getX(i)*(bounds[2]-bounds[0]);const y=bounds[1]+uv.getY(i)*(bounds[3]-bounds[1]);let z=0;curveRadius&&(z=curveRadius-Math.cos(x/curveRadius)*curveRadius,x=Math.sin(x/curveRadius)*curveRadius);position.setXYZ(i,x,y,z)}geom.boundingSphere=this.geometry.boundingSphere;geom.boundingBox=this.geometry.boundingBox;raycastMesh.matrixWorld=this.matrixWorld;raycastMesh.material.side=this.material.side;tempArray.length=0;raycastMesh.raycast(raycaster,
tempArray);for(raycaster=0;raycaster<tempArray.length;raycaster++)tempArray[raycaster].object=this,intersects.push(tempArray[raycaster])}}copy(source){const geom=this.geometry;super.copy(source);this.geometry=geom;COPYABLE_PROPS.forEach(prop=>{this[prop]=source[prop]});return this}clone(){return(new this.constructor).copy(this)}}SYNCABLE_PROPS.forEach(prop=>{const privateKey="_private_"+prop;Object.defineProperty(Text.prototype,prop,{get(){return this[privateKey]},set(value){value!==this[privateKey]&&
(this[privateKey]=value,this._needsSync=!0)}})});let deprMsgShown=!1;Object.defineProperty(Text.prototype,"anchor",{get(){return this._deprecated_anchor},set(val){this._deprecated_anchor=val;deprMsgShown||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),deprMsgShown=!0);Array.isArray(val)?(this.anchorX=`${100*(+val[0]||0)}%`,this.anchorY=`${100*(+val[1]||0)}%`):this.anchorX=this.anchorY=0}});return Text})();exports.Text=require;const _rectsCache=new WeakMap,
_caretsByRowCache=new WeakMap}
//# sourceMappingURL=module$node_modules$troika_three_text$dist$troika_three_text_esm.js.map
