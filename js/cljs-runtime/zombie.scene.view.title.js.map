{"version":3,"sources":["zombie/scene/view/title.cljs"],"mappings":"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","names":["zombie.scene.view.title/lights","zombie.scene.view.title/camera","cljs.core/deref","aspect","G__10760","G__10761","threeagent.core/cursor","zombie.state.databases/scene","light-target","js/module$node_modules$three$build$three_module.Object3D","height","width","zombie.scene.view.title/ground","iter__4611__auto__","s__10763","cljs.core/LazySeq","temp__5753__auto__","cljs.core/seq","xs__6308__auto__","cljs.core/first","iterys__4607__auto__","s__10765","cljs.core/chunked-seq?","c__4609__auto__","size__4610__auto__","cljs.core/count","b__10767","cljs.core/chunk-buffer","i__10766","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__10764","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","fs__4608__auto__","cljs.core.concat","iter__10762","x","cljs.core.range","y","px","py","zombie.util.math/pi2","zombie.state.databases/assets","zombie.scene.view.title/zombies","zombie.scene.view.title/streetlight","zombie.util.math/pi","zombie.scene.view.title/graves","zombie.scene.view.title/title","zombie.scene.view.title/buttons","cljs.core.swap_BANG_","zombie.state.databases/game","cljs.core/assoc","zombie.scene.view.title/scene","zombie.scene.view.title/render","cljs.core/chunk-first"],"sourcesContent":["(ns zombie.scene.view.title\r\n  \"Component for the title card view\"\r\n  (:require [threeagent.core :as th]\r\n            [\"three\" :as three]\r\n            [zombie.util.math :refer [pi2 pi]]\r\n            [zombie.state.databases :as db]))\r\n\r\n(defn- lights []\r\n  [:object\r\n   [:ambient-light {:intensity 0.05}]])\r\n\r\n(defn- camera []\r\n  (let [aspect @(th/cursor db/scene [:screen-aspect-ratio])\r\n        light-target (three/Object3D.)\r\n        height 8\r\n        width (* height aspect)]\r\n    [:object\r\n     [:orthographic-camera {:id \"title-camera\"\r\n                            :position [0 4 10]\r\n                            :entity {}\r\n                            :camera   {:look-at-target \"focus\"}\r\n                            :input    {:pick-camera true}\r\n                            :near     0.001\r\n                            :far      1000\r\n                            :left     (- width)\r\n                            :right    width\r\n                            :top      height\r\n                            :bottom   (- height)}\r\n      [:object {:position [0 10 20]}\r\n       [lights]]\r\n      [:object {:position [10 0 -50]}\r\n       [:instance {:object light-target}]]]]))\r\n\r\n(defn ground []\r\n  [:object {:position [-20 0 20]}\r\n   (for [x (range 5)\r\n         y (range 5)\r\n         :let [px (* x 10.0)\r\n               py (* (- y) 10.0)]]\r\n     [:plane {:position [px 0 py]\r\n              :scale [10.0 10.0 10.0]\r\n              :rotation [(- pi2) 0 0]\r\n              :receive-shadow true\r\n              :material (:material/grass @db/assets)}])])\r\n\r\n(defn zombies []\r\n  [:object\r\n   [:model {:id \"zombie-a\"\r\n            :entity {}\r\n            :type :model/zombie\r\n            :position [-3 0 -3]\r\n            :rotation [0 0.7 0]\r\n            :scale [0.005 0.005 0.005]\r\n            :animation {:clip :animation/character-idle\r\n                        :loop? true}}]\r\n   [:model {:id \"zombie-b\"\r\n            :entity {}\r\n            :type :model/zombie\r\n            :position [2 0 -4.5]\r\n            :rotation [0 -0.1 0]\r\n            :scale [0.005 0.005 0.005]\r\n            :animation {:clip :animation/character-idle\r\n                        :loop? true}}]\r\n   [:model {:id \"zombie-c\"\r\n            :entity {}\r\n            :type :model/zombie\r\n            :position [0 0 -4.5]\r\n            :scale [0.005 0.005 0.005]\r\n            :animation {:clip :animation/character-idle\r\n                        :loop? true}}]])\r\n\r\n(defn streetlight []\r\n  [:object\r\n   [:model {:type :model/light-curved\r\n            :rotation [0 pi2 0]\r\n            :position [-2 0 1]}\r\n    [:object {:position [0 6.8 1]}\r\n     [:object {:particle {:type :moths\r\n                          :loop? true}\r\n               :position [0 -0.6 0.5]}]\r\n     [:point-light {:intensity 1.8\r\n                    :color 0xF9B800\r\n                    :position [-0.8 -2 0]\r\n                    :distance 5.5}]\r\n     [:spot-light {:intensity 1.8\r\n                   :cast-shadow true\r\n                   :color 0xF9B800\r\n                   :angle (/ pi 7)\r\n                   :penumbra 0.2\r\n                   :distance 18}]]]])\r\n\r\n(defn graves []\r\n  [:object\r\n   [:model {:type :model/grave\r\n            :position [3 0 -4]}]\r\n   [:model {:type :model/coffin-old\r\n            :rotation [0 0.3 0]\r\n            :position [-1.4 0 -3.4]}]\r\n   [:model {:type :model/coffin-old\r\n            :rotation [0 -0.2 0]\r\n            :position [2.8 0 4.5]}]\r\n   [:model {:type :model/coffin\r\n            :rotation [-0.5 1.1 pi2]\r\n            :scale [0.8 0.8 0.8]\r\n            :position [-2.5 0.4 1.3]}]])\r\n   \r\n(defn- title []\r\n  [:object {:position [0 2 0]}\r\n   [:text {:text \"A Zombie Shooter\"\r\n           :anchor-x \"left\"\r\n           :color \"white\"\r\n           :position [0 2.8 0]\r\n           :scale [10 10 10]}]\r\n   [:text {:text \"by Doug\"\r\n           :color \"red\"\r\n           :position [5.15 1.9 0]\r\n           :scale [2 2 2]\r\n           :anchor-x \"left\"}]])\r\n\r\n(defn- buttons []\r\n  [:object {:position [5 3 5]\r\n            :rotation [0 0 0]}\r\n   [:plane {:input {:on-click (fn []\r\n                                (swap! db/game assoc :active-view :game))\r\n                    :cursor \"pointer\"}\r\n            :scale [1 0.8 1]\r\n            :position [0 -0.5 -0.1]}]\r\n   [:text {:text \"Play\"\r\n           :color \"green\"\r\n           :scale [8 8 8]\r\n           :anchor-x \"center\"}]])\r\n\r\n(defn- scene []\r\n  [:object\r\n   [title]\r\n   [buttons]\r\n   [zombies]\r\n   [ground]\r\n   [streetlight]\r\n   [lights]\r\n   [graves]\r\n   [:object {:position [0 2 0]\r\n             :id \"focus\"\r\n             :entity {}}]\r\n   [:model {:type :model/robot\r\n            :scale [0.005 0.005 0.005]\r\n            :animation {:clip :animation/character-title-idle\r\n                        :loop? true}}]\r\n   [:model {:type :model/bench\r\n            :scale [1.0 0.57 0.45]\r\n            :position [0 0 0.03]\r\n            :rotation [0 pi 0]}]\r\n   [:model {:type :model/blaster-a\r\n            :position [0.6 0.05 1]\r\n            :rotation [0\r\n                       (+ pi 0.3)\r\n                       pi2]}\r\n    [:object {:particle {:type :smoke-trail-loop\r\n                         :loop? true}\r\n              :position [0 0.3 -0.3]}]]])\r\n\r\n\r\n(defn render []\r\n  [:object\r\n   [camera]\r\n   [scene]])\r\n"]}